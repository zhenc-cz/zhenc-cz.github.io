<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>GEE基础语法与应用 | 随风</title><noscript>开启JavaScript才能访问本站哦~</noscript><link rel="icon" href="/img/pwa/favicon.ico"><!-- index.css--><link rel="stylesheet" href="/css/index.css?v=2.0.7"><!-- inject head--><link rel="canonical" href="http://zhenc-cz.github.io/2024/08/08/GEE%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%BA%94%E7%94%A8/"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"><!-- aplayer--><!-- swiper--><!-- fancybox ui--><!-- katex--><!-- Open Graph--><meta name="description" content="收集一些GEE(Google Earth Engine)的基础语法以及一些简单应用技巧。"><!-- pwa--><meta name="apple-mobile-web-app-capable" content="随风"><meta name="theme-color" content="var(--efu-main)"><meta name="apple-mobile-web-app-status-bar-style" content="var(--efu-main)"><link rel="bookmark" href="/img/pwa/favicon.ico"><link rel="apple-touch-icon" href="/img/pwa/favicon.ico" sizes="180x180"><script>console.log(' %c Solitude %c ' + '2.0.7' + ' %c https://github.com/everfu/hexo-theme-solitude',
    'background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px;  color: #fff',
    'background:#ff9a9a ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff',
    'background:unset ; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff')
</script><script>(()=>{
        const saveToLocal = {
            set: function setWithExpiry(key, value, ttl) {
                if (ttl === 0)
                    return
                const now = new Date()
                const expiryDay = ttl * 86400000
                const item = {
                    value: value,
                    expiry: now.getTime() + expiryDay
                }
                localStorage.setItem(key, JSON.stringify(item))
            },
            get: function getWithExpiry(key) {
                const itemStr = localStorage.getItem(key)
    
                if (!itemStr) {
                    return undefined
                }
                const item = JSON.parse(itemStr)
                const now = new Date()
    
                if (now.getTime() > item.expiry) {
                    localStorage.removeItem(key)
                    return undefined
                }
                return item.value
            }
        };
        window.utils = {
            saveToLocal: saveToLocal,
            getCSS: (url, id = false) => new Promise((resolve, reject) => {
              const link = document.createElement('link')
              link.rel = 'stylesheet'
              link.href = url
              if (id) link.id = id
              link.onerror = reject
              link.onload = link.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                link.onload = link.onreadystatechange = null
                resolve()
              }
              document.head.appendChild(link)
            }),
            getScript: (url, attr = {}) => new Promise((resolve, reject) => {
              const script = document.createElement('script')
              script.src = url
              script.async = true
              script.onerror = reject
              script.onload = script.onreadystatechange = function() {
                const loadState = this.readyState
                if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
                script.onload = script.onreadystatechange = null
                resolve()
              }
    
              Object.keys(attr).forEach(key => {
                script.setAttribute(key, attr[key])
              })
    
              document.head.appendChild(script)
            }),
            addGlobalFn: (key, fn, name = false, parent = window) => {
                const globalFn = parent.globalFn || {}
                const keyObj = globalFn[key] || {}
        
                if (name && keyObj[name]) return
        
                name = name || Object.keys(keyObj).length
                keyObj[name] = fn
                globalFn[key] = keyObj
                parent.globalFn = globalFn
            },
        }
    })()</script><!-- global head--><script>const GLOBAL_CONFIG = {
    root: '/',
    algolia: undefined,
    localsearch: undefined,
    runtime: '2024-08-07 00:00:00',
    lazyload: {
        enable: false,
        error: '/img/error_load.avif'
    },
    copyright: {"limit":50,"author":"作者: 随风","link":"链接: ","source":"来源: 随风","info":"著作权归作者所有。 商业转载请联系作者获得授权，非商业转载请注明出处。"},
    highlight: {"limit":200,"expand":true,"copy":true,"syntax":"prismjs"},
    randomlink: false,
    lang: {"theme":{"dark":"已切换至深色模式","light":"已切换至浅色模式"},"copy":{"success":"复制成功","error":"复制失败"},"backtop":"返回顶部","time":{"day":"天前","hour":"小时前","just":"刚刚","min":"分钟前","month":"个月前"},"day":" 天","f12":"开发者模式已打开，请遵循GPL协议。","totalk":"无需删除空行，直接输入评论即可"},
    aside: {
        sayhello: {
            morning: "✨ Good morning. It's a new day",
            noon: "It's time for a midday break",
            afternoon: "Tea time. 🍵",
            night: "early bedtime",
            goodnight: "Good night 😴",
        },
        sayhello2: ["You'll make it.","You're gonna make it.","Good luck, stranger."],
        sayhello3: {
            prefix: '好久不见，',
            back: '欢迎再次回来，',
        },
    },
    covercolor: {
        enable: false
    },
    comment: false,
    lightbox: 'null',
    post_ai: false,
    right_menu: false,
    lure: false,
    expire: false,
};</script><!-- page-config head--><script id="config-diff">var PAGE_CONFIG = {
    is_post: true,
    is_page: false,
    is_home: false,
    page: '',
    toc: true,
    comment: false,
    ai_text: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body id="body"><!-- universe--><canvas id="universe"></canvas><!-- background img--><!-- loading--><!-- console--><!-- sidebar--><div id="sidebar" style="zoom: 1;"><div id="menu-mask" style="display: none;"></div><div id="sidebar-menus"><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div></div></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><span class="darkmode_switchbutton menu-child" onclick="sco.switchDarkMode()"><i class="solitude fa-solid fa-circle-half-stroke"></i><span>显示模式</span></span></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">project</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/everfu/hexo-theme-solitude" title="Solitude"><img class="nolazyload back-menu-item-icon" src="/img/pwa/favicon.ico" alt="Solitude"><span class="back-menu-item-text">Solitude</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>Article</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude  fas fa-folder-closed"></i><span>Archives</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude  fas fa-clone"></i><span>Categories</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude  fas fa-tags"></i><span>Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><span>About</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-widget card-tags card-archives card-webinfo card-allinfo"><div class="card-tag-cloud"><a href="/tags/%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/">网站搭建<sup>1</sup></a><a href="/tags/GEE/">GEE<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/">算法<sup>1</sup></a><a href="/tags/%E9%81%A5%E6%84%9F/">遥感<sup>1</sup></a><a href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/">云计算<sup>1</sup></a></div></div></div></div><!-- keyboard--><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav class="show" id="nav"><div id="nav-group"><div id="blog_name"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon solitude fab fa-squarespace"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">project</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/everfu/hexo-theme-solitude" title="Solitude"><img class="nolazyload back-menu-item-icon" src="/img/pwa/favicon.ico" alt="Solitude"><span class="back-menu-item-text">Solitude</span></a></div></div></div></div><a id="site-name" href="/" title="返回博客主页"><span class="title">Solitude</span><i class="solitude fa-solid fa-home"></i></a></div><div id="page-name-mask"><div id="page-name"><a id="page-name-text" onclick="sco.toTop()">GEE基础语法与应用</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><span>Home</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span>Article</span></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="solitude  fas fa-folder-closed"></i><span>Archives</span></a></li><li><a class="site-page child" href="/categories/"><i class="solitude  fas fa-clone"></i><span>Categories</span></a></li><li><a class="site-page child" href="/tags/"><i class="solitude  fas fa-tags"></i><span>Tags</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><span>About</span></a></div></div></div><div id="nav-left"></div><div id="nav-right"><div class="nav-button" id="travellings_button"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html" title=""><i class="solitude fas fa-train"></i></a></div><div class="nav-button" id="nav-totop" onclick="sco.toTop()"><a class="totopbtn"><i class="solitude fa-solid fa-arrow-up"></i><span id="percent">0</span></a></div><div id="toggle-menu"><a class="site-page"><i class="solitude fa-solid fa-bars"></i></a></div></div></div></nav><div class="coverdiv" id="coverdiv"><img class="nolazyload" id="post-cover" src="/img/default.avif" alt="GEE基础语法与应用"></div><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original" title="该文章为原创文章，注意版权协议">原创</a><span class="post-meta-categories"><a class="post-meta-categories" href="/categories/%E9%81%A5%E6%84%9F/">遥感</a></span><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/GEE/"><span class="tags-name tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>GEE</span></a><a class="post-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tags-name tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>算法</span></a><a class="post-meta__tags" href="/tags/%E9%81%A5%E6%84%9F/"><span class="tags-name tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>遥感</span></a><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"><span class="tags-name tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>云计算</span></a></div></div></div></div><h1 class="post-title">GEE基础语法与应用</h1><div id="post-meta"><div class="meta-secondline"><span class="post-meta-date" title="发布于 2024-08-08 21:05:00"><i class="post-meta-icon solitude fa-solid fa-calendar-days"></i><time datetime="2024-08-08T13:05:00.000Z">2024-08-08T13:05:00.000Z</time></span><span class="post-meta-date" title="最后更新于 2024-08-08 21:38:23"><i class="post-meta-icon solitude fa-solid fa-arrow-rotate-right"></i><time datetime="2024-08-08T13:38:23.259Z">2024-08-08T13:38:23.259Z</time></span><span class="post-meta-position" title="作者IP归属地为China-NanChang"><i class="post-meta-icon solitude fa-solid fa-map"></i><span>China-NanChang</span></span><a class="post-meta-pv" href="/2024/08/08/GEE%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%BA%94%E7%94%A8/" title="文章热度"><i class="post-meta-icon solitude fa-solid fa-fire-flame-curved"></i></a></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>1、什么是Earth Engine？		</p>
<p>​		Earth Engine是一个科学分析和可视化地理空间数据集的平台，面向学术、非营利组织、企业和政府用户。地球引擎拥有卫星图像，并将其存储在公共数据档案中，其中包括40多年前的历史地球图像。每天摄取的图像可用于全球范围的数据挖掘。Earth Engine还提供api和其他工具，以支持大型数据集的分析。</p>
<p>2、Earth Engine与Google Earth 有什么区别？</p>
<p>​		Google Earth   能够通过与虚拟地球的交互来旅行、探索和了解世界，可以查看卫星图像、地图、地形、3D建筑等。Earth Engine是一种分析地理空间信息的工具，可以分析森林和水的覆盖、土地利用的变化，或者评估农田的健康状况，还有许多其他可能的分析。</p>
<h2 id="一、基础数据结构"><a href="#一、基础数据结构" class="headerlink" title="一、基础数据结构"></a>一、基础数据结构</h2><h3 id="1、字符String"><a href="#1、字符String" class="headerlink" title="1、字符String"></a>1、字符String</h3><p>字符变量</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span>；

创建一个名为 string 的变量<span class="token punctuation">,</span>ee<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>赋给变量string
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>字符链接耦合</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> cat_string <span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span>；

将<span class="token punctuation">.</span><span class="token punctuation">(</span>点<span class="token punctuation">)</span>前边的文本和cat 后边的括号里边的文本进行合并 函数前面的连接函数后面的<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>替换命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string_2 <span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> old<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

对<span class="token punctuation">.</span><span class="token punctuation">(</span>点<span class="token punctuation">)</span>之前的文本进行替换操作，替换的方法是把原来文本中第一个包含文本<span class="token number">1</span>的内容替换为文本<span class="token number">2</span>的内容。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>匹配命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string_2<span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token string">'C'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

对<span class="token punctuation">.</span><span class="token punctuation">(</span>点<span class="token punctuation">)</span>之前的文本进行匹配操作，取出来c并赋值给string_2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>分割操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span> <span class="token string">"A_B_C_D"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string_2<span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> <span class="token string">'_'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span> <span class="token string">'_'</span> <span class="token punctuation">)</span><span class="token function">把前边文本根据括号内的文本</span><span class="token punctuation">(</span>或者符号<span class="token punctuation">)</span>进行分割后得到新的List 数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>截取操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span> <span class="token string">"1234 5678 90AB"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string_2<span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string_3<span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string_4<span class="token operator">=</span> string_1<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span> <span class="token punctuation">,</span> <span class="token punctuation">)</span>的功能是将前边的文本取出来一部分，具体的取法根据括号内的数字来确定，
<span class="token function">如果是两个数字，那么取从第一个数字</span><span class="token punctuation">(</span>不包含<span class="token punctuation">)</span><span class="token function">开始到第二个数字</span><span class="token punctuation">(</span>包含<span class="token punctuation">)</span>截止的文本部分；
<span class="token function">如果只有一个数字，就从这个数字开始</span><span class="token punctuation">(</span>不包含<span class="token punctuation">)</span>取到文本结尾。
假如这个数字是负数，那么开始的位置就是从右往左数的。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>长度测量命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> string <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span> <span class="token string">'ABCD 1234'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number <span class="token operator">=</span> string <span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

计算给定文本长度<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2、数字Number"><a href="#2、数字Number" class="headerlink" title="2、数字Number"></a>2、数字Number</h3><p>创建数字</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> number<span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">1324567980</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>数字格式的转换</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> number_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">3.14159</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_2 <span class="token operator">=</span> number_1<span class="token punctuation">.</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_3 <span class="token operator">=</span> number_1<span class="token punctuation">.</span><span class="token function">toInt8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


sconsole： 
    <span class="token operator">-</span><span class="token number">3.14159</span>
	<span class="token operator">-</span><span class="token number">3</span>
	<span class="token operator">-</span><span class="token number">3</span>


其它常见数字转换
<span class="token punctuation">.</span>unit8<span class="token operator">/</span><span class="token number">16</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">/</span><span class="token number">64</span> <span class="token operator">=</span> <span class="token punctuation">.</span>toUnit <span class="token number">8</span><span class="token operator">/</span><span class="token number">16</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">/</span><span class="token number">64</span>
<span class="token punctuation">.</span>float <span class="token operator">=</span> <span class="token punctuation">.</span>toFloat
<span class="token punctuation">.</span>double <span class="token operator">=</span> <span class="token punctuation">.</span>toDouble<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>数字比较</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">number<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">=</span> 
number<span class="token punctuation">.</span><span class="token function">neq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   ≠
number<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">></span>
number<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   ≥
number<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&lt;</span>
number<span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   ≤
   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>数字逻辑操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">number<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
number<span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
number<span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>其它函数操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> number_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">3.1415</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_2 <span class="token operator">=</span> number_1<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

进行向下取整和取绝对值操作

number<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		四舍五入 
number<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		向上取整 
number<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		开方 
number<span class="token punctuation">.</span><span class="token function">exp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		幂 
number<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		对数 
number<span class="token punctuation">.</span><span class="token function">log10</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		<span class="token number">10</span> 底对数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>数字数学运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> number_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">3.14</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">1.41</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> number_2<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>number_1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 代表用前边的数字减去后边的数字的含义

其它数学运算
number<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			加
number<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		乘
number<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			除
number<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			最大值
number<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			最小值
number<span class="token punctuation">.</span><span class="token function">mod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			取模
number<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			取第一个
number<span class="token punctuation">.</span><span class="token function">first_nonzero</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	取非零第一个<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>数字的是非比较</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span><span class="token function">IsEqual</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">var</span> number_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">3.14</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">3.14</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_3 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">3.141</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> True_false_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span><span class="token function">IsEqual</span><span class="token punctuation">(</span> number_1 <span class="token punctuation">,</span>number_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> True_false_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span><span class="token function">IsEqual</span><span class="token punctuation">(</span> number_2<span class="token punctuation">,</span> number_3 <span class="token punctuation">)</span><span class="token punctuation">;</span>

比较括号内的两个数字是否相同，如果相同的话返回一个文本<span class="token boolean">true</span>，如果不同的话返回一个文本<span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>位运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">bitwise<span class="token punctuation">.</span>And<span class="token operator">/</span>Or<span class="token operator">/</span>Xor<span class="token operator">/</span>Not  <span class="token operator">=</span>  bitwise_and<span class="token operator">/</span>_or<span class="token operator">/</span>_xor<span class="token operator">/</span>_not

与<span class="token operator">/</span>或<span class="token operator">/</span>异或<span class="token operator">/</span>非                与<span class="token operator">/</span>或<span class="token operator">/</span>异或<span class="token operator">/</span>非<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>位运算移位操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> number <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_left <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">leftShift</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> number_right <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">rightShift</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">'00000011 to 00001100'</span><span class="token punctuation">,</span> number_left <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">'00000011 to 00000001'</span><span class="token punctuation">,</span> number_right <span class="token punctuation">)</span><span class="token punctuation">;</span>

移位位运算的功能是将数字变成二进制后，将二进制中所有的数字向左或者向右移动一定的距离，产生的空档用 <span class="token number">0</span> 补充。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3、字典Dictionary"><a href="#3、字典Dictionary" class="headerlink" title="3、字典Dictionary"></a>3、字典Dictionary</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Dictionary_Profile <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
<span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">'Jinzhu Wang'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Gender</span><span class="token operator">:</span> <span class="token string">'Male'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Age</span><span class="token operator">:</span> <span class="token string">'20'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Location</span><span class="token operator">:</span> <span class="token string">'Chongqing'</span>
<span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>字典合并combine</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Dict_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">Weight</span><span class="token operator">:</span><span class="token string">'50kg'</span><span class="token punctuation">,</span> <span class="token literal-property property">Hight</span><span class="token operator">:</span><span class="token string">'160cm'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Dict_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">Weight</span><span class="token operator">:</span><span class="token string">'70g'</span><span class="token punctuation">,</span> <span class="token literal-property property">Age</span><span class="token operator">:</span> <span class="token number">26</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Dict_Combine <span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span> Dict_2<span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

两个例子在合并时遇到了Key 相同的情况，此时如果在<span class="token punctuation">.</span><span class="token function">combine</span><span class="token punctuation">(</span> <span class="token punctuation">,</span> <span class="token punctuation">)</span>命令中指定第二个参数为<span class="token boolean">true</span>，那么这时在合并的字典中就会将重复的内容保留为第二个变量的值。
相反的，如果将第二个参数指定为<span class="token boolean">false</span>，那么合并字典中的重复内容就是第一个字典的值。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>更改内容命令set</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Dict_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
<span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">'Jinzhu Wang'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Gender</span><span class="token operator">:</span> <span class="token string">'Male'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Age</span><span class="token operator">:</span> <span class="token string">'> 20'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Location</span><span class="token operator">:</span> <span class="token string">'Chongqing'</span>
<span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Dict_Change <span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Age'</span><span class="token punctuation">,</span> <span class="token string">'&lt;30'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span> <span class="token punctuation">,</span> <span class="token punctuation">)</span>有两个参数，第一个参数是要更改内容的Key，第二个参数是将要新写
入的内容。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>陈列命令key</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Dict_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
<span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">'Jinzhu Wang'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Gender</span><span class="token operator">:</span> <span class="token string">'Male'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Age</span><span class="token operator">:</span> <span class="token string">'> 20'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Location</span><span class="token operator">:</span> <span class="token string">'Chongqing'</span>
<span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> List_Keys<span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console：
<span class="token number">0</span>：Age
<span class="token number">1</span><span class="token operator">:</span>Gender
<span class="token number">2</span><span class="token operator">:</span>Location
<span class="token number">3</span><span class="token operator">:</span>Name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>读取命令get</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Dict_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Dictionary</span><span class="token punctuation">(</span> <span class="token punctuation">&#123;</span>
<span class="token literal-property property">Name</span><span class="token operator">:</span> <span class="token string">'Jinzhu Wang'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Gender</span><span class="token operator">:</span> <span class="token string">'Male'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Age</span><span class="token operator">:</span> <span class="token string">'> 20'</span><span class="token punctuation">,</span>
<span class="token literal-property property">Location</span><span class="token operator">:</span> <span class="token string">'Chongqing'</span>
<span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> The_Name <span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Name'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>The_Name<span class="token punctuation">)</span><span class="token punctuation">;</span>

console：
jinzhu wang<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>关键词是否存在命令contains</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> The_Contain <span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'Hight'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>字典尺寸查询命令size</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> The_Size <span class="token operator">=</span> Dict_1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<h3 id="4、列表List"><a href="#4、列表List" class="headerlink" title="4、列表List"></a>4、列表List</h3><p>创建命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_Example <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'B'</span><span class="token punctuation">,</span><span class="token string">'C'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span><span class="token string">'Good'</span><span class="token punctuation">,</span><span class="token string">'Bye'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

List 内部通过逗号“<span class="token punctuation">,</span><span class="token function">”来分割空间，同时其中的每一个空间都可以用来存储任意数据格式</span><span class="token punctuation">(</span>包括遥感图像和矢量文件<span class="token punctuation">)</span>的数据



重复创建

<span class="token keyword">var</span> List_Repeat <span class="token operator">=</span> ee<span class="token punctuation">.</span>List<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span> <span class="token string">'Yeah!'</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

参数<span class="token number">5</span>为创建的遍数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>等差创建命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> list_sequence <span class="token operator">=</span> ee<span class="token punctuation">.</span>List<span class="token punctuation">.</span><span class="token function">sequence</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

创建等差数列，从<span class="token number">10</span>至<span class="token number">100</span>，步长为<span class="token number">5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>替换命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'No.1'</span><span class="token punctuation">,</span> <span class="token number">1993</span><span class="token punctuation">,</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'No.2'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">05</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_3 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">05</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

replace只把第一个<span class="token number">01</span>改成<span class="token number">05</span>
replaceAll把全部<span class="token number">01</span>都改成<span class="token number">05</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>添加与插入</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'No.1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'Male'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_3 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'Chongqing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>打包命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token number">01</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">'No.1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Year'</span><span class="token punctuation">,</span><span class="token string">'Month'</span><span class="token punctuation">,</span><span class="token string">'Day'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console：
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token string">"year"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"month"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">"day"</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>倒置和转置</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_Reverse <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_Rotate <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>List_Reverse<span class="token punctuation">,</span>List_Rotate<span class="token punctuation">)</span>

console：
<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>排序命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token string">'Zhao'</span><span class="token punctuation">,</span> <span class="token string">'Wang'</span><span class="token punctuation">,</span> <span class="token string">'Ma'</span><span class="token punctuation">,</span> <span class="token string">'Liu'</span><span class="token punctuation">,</span> <span class="token string">'Bai'</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_Sort <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

按字母<span class="token operator">/</span>数字顺序排列
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>位置互换命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>List_2<span class="token punctuation">)</span>

console：<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>map命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token string">'Zhao'</span><span class="token punctuation">,</span><span class="token string">'Qian'</span><span class="token punctuation">,</span><span class="token string">'Sun'</span><span class="token punctuation">,</span><span class="token string">'Li'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Do</span> <span class="token punctuation">(</span><span class="token parameter">Name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> ee<span class="token punctuation">.</span>List<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>Name<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> Do <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>List_2<span class="token punctuation">)</span>

console：
 <span class="token punctuation">[</span><span class="token string">'Zhao'</span><span class="token punctuation">,</span><span class="token string">'Zhao'</span><span class="token string">'Zhao'</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">'Qian'</span><span class="token punctuation">,</span><span class="token string">'Qian'</span><span class="token punctuation">,</span><span class="token string">'Qian'</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">'Sun'</span><span class="token punctuation">,</span><span class="token string">'Sun'</span><span class="token punctuation">,</span><span class="token string">'Sun'</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span><span class="token string">'Li'</span><span class="token punctuation">,</span><span class="token string">'Li'</span><span class="token punctuation">,</span><span class="token string">'Li'</span><span class="token punctuation">]</span>

<span class="token punctuation">.</span>map 命令的作用是对List <span class="token function">中的每一个对象</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span>都执行了某种相同的操作，这种相同的操作由<span class="token keyword">function</span> 命令进行编写。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>循环命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> List_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span>List<span class="token punctuation">.</span><span class="token function">sequence</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Do</span> <span class="token punctuation">(</span> <span class="token parameter">Number_1<span class="token punctuation">,</span> Number_2</span> <span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span> <span class="token keyword">return</span> ee<span class="token punctuation">.</span><span class="token function">Number</span><span class="token punctuation">(</span>Number_1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Number_2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> List_2 <span class="token operator">=</span> List_1<span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span> Do<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> List_1<span class="token punctuation">,</span> List_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token function">iterate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 命令有两个参数，第一个参数是执行循环要执行的参数方程，第二个是循环的初始量就行。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="5、矩阵Array"><a href="#5、矩阵Array" class="headerlink" title="5、矩阵Array"></a>5、矩阵Array</h3><p>矩阵构建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3*1</span>
<span class="token keyword">var</span> Array_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1*3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>单位矩阵构建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Array<span class="token punctuation">.</span><span class="token function">identity</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>Array_1<span class="token punctuation">)</span>

<span class="token literal-property property">console</span><span class="token operator">:</span>
<span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>矩阵重复命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_2 <span class="token operator">=</span> Array_1<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token literal-property property">console</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

第一个参数为要重复的方向，<span class="token number">0</span>为列方向、<span class="token number">1</span>为行方向；第二个参数为重复的遍数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>矩阵倒置命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_2 <span class="token operator">=</span> Array_1<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_3 <span class="token operator">=</span> Array_2<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span> Array_1<span class="token punctuation">,</span> Array_2<span class="token punctuation">,</span>Array_3<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token literal-property property">console</span><span class="token operator">:</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>数据转换命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token number">2.2</span><span class="token punctuation">,</span> <span class="token number">3.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4.4</span><span class="token punctuation">,</span> <span class="token number">5.5</span><span class="token punctuation">,</span> <span class="token number">6.6</span><span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_2 <span class="token operator">=</span> Array_1<span class="token punctuation">.</span><span class="token function">uint8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>Array_1<span class="token punctuation">,</span>Array_2<span class="token punctuation">)</span>

console：
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.1</span><span class="token punctuation">,</span><span class="token number">2.2</span><span class="token punctuation">,</span><span class="token number">3.3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4.4</span><span class="token punctuation">,</span><span class="token number">5.5</span><span class="token punctuation">,</span><span class="token number">6.6</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>矩阵的交、并命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3.14</span><span class="token punctuation">,</span><span class="token number">1.41</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_and <span class="token operator">=</span> Array_1<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span> Array_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Array_or <span class="token operator">=</span> Array_1<span class="token punctuation">.</span><span class="token function">or</span><span class="token punctuation">(</span> Array_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> Array_1<span class="token punctuation">,</span> Array_2<span class="token punctuation">,</span> Array_and<span class="token punctuation">,</span> Array_or <span class="token punctuation">)</span><span class="token punctuation">;</span>

and：如果两个值都非零，则返回<span class="token number">1</span>。
or：如果输入值非零，则返回<span class="token number">1</span>。

<span class="token literal-property property">console</span><span class="token operator">:</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3.14</span><span class="token punctuation">,</span><span class="token number">1.41</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="二、GEE数据类型"><a href="#二、GEE数据类型" class="headerlink" title="二、GEE数据类型"></a>二、GEE数据类型</h2><h3 id="1、Geometry"><a href="#1、Geometry" class="headerlink" title="1、Geometry"></a>1、Geometry</h3><p>点与多点的创建</p>
<p>点</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">116.3968</span><span class="token punctuation">,</span><span class="token number">39.9186</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>  <span class="token comment">//将地图视图居中于给定对象，第一个参数为位置对象，第二个参数为缩放比例范围从0-24</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>多点</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">MultiPoint</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.3921</span><span class="token punctuation">,</span> <span class="token number">39.9224</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.4014</span><span class="token punctuation">,</span> <span class="token number">39.9227</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.4017</span><span class="token punctuation">,</span> <span class="token number">39.9138</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.3929</span><span class="token punctuation">,</span> <span class="token number">39.9135</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>但是利用代码创建点的效率很低，一般直接在地图上利用工具直接进行选取，再将geometry重命名即可</p>
<p>线段与多线的创建</p>
<p>线段</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">LineString</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39234040929296</span><span class="token punctuation">,</span> <span class="token number">39.91321497621612</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39195417119481</span><span class="token punctuation">,</span> <span class="token number">39.92276018488313</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40186761571385</span><span class="token punctuation">,</span> <span class="token number">39.9230234821268</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40216802312352</span><span class="token punctuation">,</span> <span class="token number">39.91354414349019</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>多线</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">MultiLineString</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39367078496434</span><span class="token punctuation">,</span> <span class="token number">39.92134494485143</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39899228764989</span><span class="token punctuation">,</span> <span class="token number">39.92173989850053</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39401410771825</span><span class="token punctuation">,</span> <span class="token number">39.91953471147776</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39693235112645</span><span class="token punctuation">,</span> <span class="token number">39.92085124958646</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39628862096288</span><span class="token punctuation">,</span> <span class="token number">39.91920557299557</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39873479558446</span><span class="token punctuation">,</span> <span class="token number">39.91752694212849</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>单环线与多环线的创建</p>
<p>单环线</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">LinearRing</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39242623998143</span><span class="token punctuation">,</span> <span class="token number">39.91321497621612</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39195417119481</span><span class="token punctuation">,</span> <span class="token number">39.92269436041402</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40178178502538</span><span class="token punctuation">,</span> <span class="token number">39.9230234821268</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40212510777928</span><span class="token punctuation">,</span> <span class="token number">39.91357706013058</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39242623998143</span><span class="token punctuation">,</span> <span class="token number">39.91321497621612</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>

环线首尾要连接起来，如果最后一个点不等于起始点，则在第五个点建立一个起始点的副本<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>多环线</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">MultiLineString</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39320681392098</span><span class="token punctuation">,</span> <span class="token number">39.921786784372976</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39337847529794</span><span class="token punctuation">,</span> <span class="token number">39.92040443758097</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39578173457528</span><span class="token punctuation">,</span> <span class="token number">39.92070065709998</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39556715785409</span><span class="token punctuation">,</span> <span class="token number">39.92188552236169</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39320681392098</span><span class="token punctuation">,</span> <span class="token number">39.921786784372976</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39801333247567</span><span class="token punctuation">,</span> <span class="token number">39.91918663276216</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39548132716561</span><span class="token punctuation">,</span> <span class="token number">39.91777131887048</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.4006311684742</span><span class="token punctuation">,</span> <span class="token number">39.91747508667966</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39801333247567</span><span class="token punctuation">,</span> <span class="token number">39.91918663276216</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>

四边单环线共有五点定位点，三边单环线共有四个定位点<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>面与正方形的创建</p>
<p>面</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39179060756112</span><span class="token punctuation">,</span> <span class="token number">39.922576684295926</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39230559169198</span><span class="token punctuation">,</span> <span class="token number">39.913064366936894</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40213320552255</span><span class="token punctuation">,</span> <span class="token number">39.91352520169099</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40161822139169</span><span class="token punctuation">,</span> <span class="token number">39.92297163084022</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39483759700204</span><span class="token punctuation">,</span> <span class="token number">39.91961451259886</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39496634303475</span><span class="token punctuation">,</span> <span class="token number">39.91648763678902</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39900038539315</span><span class="token punctuation">,</span> <span class="token number">39.916553467224674</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39874289332772</span><span class="token punctuation">,</span> <span class="token number">39.91977908105491</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>正方形</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Rectangle</span><span class="token punctuation">(</span>
<span class="token number">116.3926</span><span class="token punctuation">,</span> <span class="token number">39.9133</span><span class="token punctuation">,</span> <span class="token number">116.4014</span><span class="token punctuation">,</span> <span class="token number">39.9227</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>坐标系转换与显示效果</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Geo <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token number">65.9</span><span class="token punctuation">,</span> <span class="token number">19.8</span><span class="token punctuation">,</span><span class="token number">134.5</span><span class="token punctuation">,</span> <span class="token number">50.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Planr <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Geometry</span><span class="token punctuation">(</span>China_Geo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>； <span class="token comment">//三个参数分别是“矢量文件”，“坐标系”和“显示方式””，默认情况下第三个参数是true，代表用地理坐标系来显示文件。本例中此处改为了false，这意味着将用投影坐标系来显示文件。</span>
<span class="token keyword">var</span> China_EPSG <span class="token operator">=</span> China_Geo<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token string">'EPSG:3857'</span><span class="token punctuation">,</span> ee<span class="token punctuation">.</span><span class="token function">ErrorMargin</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Geo<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'FF0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'geodesic polygon'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Planr<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'000000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'planar polygon'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_EPSG<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'0000CD'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'EPSG polygon '</span><span class="token punctuation">)</span>



<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token string">'EPSG:3857'</span><span class="token punctuation">,</span> ee<span class="token punctuation">.</span><span class="token function">ErrorMargin</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>的功能是将原来Geometry 的坐标系转换成指定坐标系，
该命令中有两个参数，第一个参数是要转换的目标坐标系<span class="token punctuation">,</span><span class="token literal-property property">第二个参数是转换后的允许误差</span><span class="token operator">:</span>边距的单位<span class="token operator">:</span>“米”、“投影”或“无限”<span class="token punctuation">.</span>

ee<span class="token punctuation">.</span><span class="token function">Geometry</span><span class="token punctuation">(</span>China_Geo<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>的三个参数分别为“矢量文件”，“坐标系”和“显示方式”，默认情况下第三个参数是<span class="token boolean">true</span>，代表用地理坐标系来显示文件。本例中此处改为了<span class="token boolean">false</span>，这意味着将用投影坐标系来显示文件<span class="token punctuation">.</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>求Geometry中心点</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Geo <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token number">65.9</span><span class="token punctuation">,</span> <span class="token number">19.8</span><span class="token punctuation">,</span><span class="token number">134.5</span><span class="token punctuation">,</span> <span class="token number">50.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Certer <span class="token operator">=</span> China_Geo<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Geo<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'FF0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'geodesic polygon'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Certer<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Geometry 的四至和凸包</p>
<p>凸包意为包含一组点集的最小面积的凸多边形</p>
<p>Geometry 缓冲区</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">TGR</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/TGR"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> TGR_Buffer <span class="token operator">=</span> <span class="token constant">TGR</span><span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span><span class="token constant">TGR</span> <span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">TGR</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>TGR_Buffer<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>求取Geometry并集</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Polygon_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">152.71032334056088</span><span class="token punctuation">,</span> <span class="token number">18.862610207551867</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">170.72717665943918</span><span class="token punctuation">,</span> <span class="token number">19.69222816299581</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">171.07873915943918</span><span class="token punctuation">,</span> <span class="token number">40.62061002589569</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">153.41344834056088</span><span class="token punctuation">,</span> <span class="token number">40.08478212000696</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>；

<span class="token keyword">var</span> Polygon_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">176.52795790943912</span><span class="token punctuation">,</span> <span class="token number">45.620172046005735</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">176.70373915943912</span><span class="token punctuation">,</span> <span class="token number">32.2945468815855</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">142.60217665943918</span><span class="token punctuation">,</span> <span class="token number">32.2945468815855</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">141.02014540943918</span><span class="token punctuation">,</span> <span class="token number">45.49709377875777</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Polygon_union <span class="token operator">=</span> Polygon_1<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span>Polygon_2<span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Polygon_union<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Polygon_1<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Polygon_2<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Polygon_union<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h3 id="2、Feature"><a href="#2、Feature" class="headerlink" title="2、Feature"></a>2、Feature</h3><p>Feature是带有属性的Geometry，除了可以用上Geometry的空间操作外，还可以根据其属性进行相关操作。</p>
<p>Feature的创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">116.392391422</span><span class="token punctuation">,</span> <span class="token number">39.9131466590</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">116.402090290</span><span class="token punctuation">,</span> <span class="token number">39.913541660</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.401704052</span><span class="token punctuation">,</span> <span class="token number">39.9229880868</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">116.391833522</span><span class="token punctuation">,</span> <span class="token number">39.922593140</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Feature_Forbindden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>
	Forbidden_City<span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"故宫"</span><span class="token literal-property property">，location</span><span class="token operator">:</span><span class="token string">"北京"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Feature_Fobidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Feature_Fobidden_City<span class="token punctuation">)</span>


ee<span class="token punctuation">,</span><span class="token function">Feature</span><span class="token punctuation">(</span><span class="token punctuation">)</span>共有两个参数，第一个是Feature的Geometry数据，第二个是Feature的属性信息，属性信息使用Dictionary的结构写入<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature的选择创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39239142238046</span><span class="token punctuation">,</span> <span class="token number">39.913146659084674</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40209029017831</span><span class="token punctuation">,</span> <span class="token number">39.91354166001771</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40170405208016</span><span class="token punctuation">,</span> <span class="token number">39.922988086896794</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39183352290536</span><span class="token punctuation">,</span> <span class="token number">39.922593140447425</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Feature_Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>
Forbidden_City<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"故宫"</span><span class="token punctuation">,</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token string">"北京"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Feature_select_1 <span class="token operator">=</span> Feature_Forbidden_City<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Feature_select_2 <span class="token operator">=</span> Feature_Forbidden_City<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">"名称"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span>Feature_select_1<span class="token punctuation">,</span>Feature_select_2<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Feature_Forbidden_City<span class="token punctuation">)</span>


Feature<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令的功能是创建一个原Feature的“拷贝”，当括号内只有一个参数时，<span class="token constant">GEE</span> 拷贝原Feature 的Geometary，并将参数对应的属性加入到这个Geometry 中形成新的Feature。当括号内有两个参数时，<span class="token constant">GEE</span> 在将参数加入Geometry 的基础上，利用第二个参数对属性的Key 进行重命名。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature属性改写</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Rectangle</span><span class="token punctuation">(</span> <span class="token number">116.3926</span><span class="token punctuation">,</span> <span class="token number">39.9133</span><span class="token punctuation">,</span> <span class="token number">116.4014</span><span class="token punctuation">,</span> <span class="token number">39.9227</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Feature_Forbidden_City <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"故宫"</span><span class="token punctuation">,</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token string">"北京"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Feature_Set <span class="token operator">=</span> Feature_Forbidden_City<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span><span class="token string">"Gugong"</span><span class="token punctuation">,</span><span class="token string">"location"</span><span class="token punctuation">,</span><span class="token string">"Beijing"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Feature_Set_Multi <span class="token operator">=</span> Feature_Forbidden_City<span class="token punctuation">.</span><span class="token function">setMulti</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">"name"</span><span class="token operator">:</span><span class="token string">"紫禁城"</span><span class="token punctuation">,</span><span class="token string-property property">"location"</span><span class="token operator">:</span><span class="token string">"首都"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>Feature_Fobidden_City<span class="token punctuation">,</span>Feature_Set<span class="token punctuation">,</span>Feature_Set_Multi<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Forbidden_City<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Feature_Fobidden_City<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature空间操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Chongqing <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>China<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> CQ_Simple <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">simplify</span><span class="token punctuation">(</span><span class="token number">50000</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> CQ_Centroid <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> CQ_Hull <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">convexHull</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> CQ_Bounds <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">bounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> CQ_Buffer <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span><span class="token number">50000</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Chongqing<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Chongqing<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Simple<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Centroid<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Hull<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Bounds<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Buffer<span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token function">filterBound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>和<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，它们的功能是利用地理位置进行筛选和取第一
个数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature的面积和周长</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">TGR</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/TGR"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> TGR_Area <span class="token operator">=</span> <span class="token constant">TGR</span><span class="token punctuation">.</span><span class="token function">area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//面积</span>
<span class="token keyword">var</span> TGR_Perimeter <span class="token operator">=</span> <span class="token constant">TGR</span><span class="token punctuation">.</span><span class="token function">perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//周长</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<p>Feature 的空间信息和属性信息的提取</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">TGR</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/TGR"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> TGR_geometry <span class="token operator">=</span> <span class="token constant">TGR</span><span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> TGR_get <span class="token operator">=</span> <span class="token constant">TGR</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'BOUNT_ID'</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">TGR</span><span class="token punctuation">,</span>TGR_geometry<span class="token punctuation">,</span>TGR_get<span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的功能相当于提取Feature <span class="token function">的空间信息，而get</span><span class="token punctuation">(</span><span class="token string">'BOUNT_ID'</span><span class="token punctuation">)</span>的功能
是获取Feature 属性中相应Key 的内容信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>总结上述常见的Feature命令</p>
<table>
<thead>
<tr>
<th>ee.Feature()</th>
<th>Feature.select()</th>
<th>Feature.transform()</th>
<th>Feature.set&#x2F;setMulti()</th>
</tr>
</thead>
<tbody><tr>
<td>Feature.geometry()</td>
<td>Feature.get()</td>
<td>Feature.Length&#x2F;Area&#x2F;Perimeter()</td>
<td></td>
</tr>
<tr>
<td>Feature.centroid&#x2F;simplify&#x2F;bounds&#x2F;convexHull&#x2F;buffer()</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Feature.union&#x2F;intersection&#x2F;difference&#x2F;symmetricDifference()</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="3、FeatureCollection"><a href="#3、FeatureCollection" class="headerlink" title="3、FeatureCollection"></a>3、FeatureCollection</h3><p>FeatureCollection可以看成是一个或多个Feature文件的集合。Feature Collection 相对Feature 也多出了一定的“数据集”信息。  可以理解为<strong>矢量特征集合类</strong></p>
<p>比如，中国各省级行政边界都可以看做是的Feature，都包含有各自的“Name”、“Area”等信息，而当将这些Feature 集合到一起时，就形成了一个“中国省边界”的Feature Collection，这个Collection 中可以包含“数据来源”、“采集时间”等属于数据集合的信息。</p>
<p>用户自行上传shp文件时需要打包为zip文件且包含shp&#x2F;dbf&#x2F;shx类型</p>
<p>FeatureCollection的创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Poly <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39248531478768</span><span class="token punctuation">,</span> <span class="token number">39.91319513792091</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40222709792977</span><span class="token punctuation">,</span> <span class="token number">39.91378763804685</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40184085983162</span><span class="token punctuation">,</span> <span class="token number">39.92303655876662</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39171283859139</span><span class="token punctuation">,</span> <span class="token number">39.922674524864675</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Points <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">MultiPoint</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.38823669570809</span><span class="token punctuation">,</span> <span class="token number">39.92079850034943</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.38677757400399</span><span class="token punctuation">,</span> <span class="token number">39.91885659627606</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.38669174331551</span><span class="token punctuation">,</span> <span class="token number">39.916881722097074</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.38767879623299</span><span class="token punctuation">,</span> <span class="token number">39.91421555161684</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Lines <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">LineString</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.37733619827156</span><span class="token punctuation">,</span> <span class="token number">39.9167171466781</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.38192814010506</span><span class="token punctuation">,</span> <span class="token number">39.91754001981801</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.37712162155037</span><span class="token punctuation">,</span> <span class="token number">39.91365597179514</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.38424556869393</span><span class="token punctuation">,</span> <span class="token number">39.914478881715695</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Feature_Collection <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Poly<span class="token punctuation">,</span>Points<span class="token punctuation">,</span>Line<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Feature_Collection<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Feature_Collection<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Feature_Collection<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>FeatureCollection的随机点生成</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Poly <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">116.39248531478768</span><span class="token punctuation">,</span> <span class="token number">39.91319513792091</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40222709792977</span><span class="token punctuation">,</span> <span class="token number">39.91378763804685</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.40184085983162</span><span class="token punctuation">,</span> <span class="token number">39.92303655876662</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">116.39171283859139</span><span class="token punctuation">,</span> <span class="token number">39.922674524864675</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Random_Points <span class="token operator">=</span> ee<span class="token punctuation">.</span>FeatureCollection<span class="token punctuation">.</span><span class="token function">randomPoints</span><span class="token punctuation">(</span>Poly<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Poly<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Poly<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Random_Points<span class="token punctuation">)</span>


两个参数，在Ploy范围内随机生成<span class="token number">20</span>个点<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>FeatureCollection的属性筛选</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Proction_Area <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"WCMC/WDPA/current/polygons"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Proction_Area_China <span class="token operator">=</span> Proction_Area<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">"ISO3"</span><span class="token punctuation">,</span><span class="token string">"quals"</span><span class="token punctuation">,</span><span class="token string">"CHN"</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Proction_Area_China<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Proction_Area <span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Proction_Area_China <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'FF0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


这里需要注意两点。第一是加载的数据集是“世界自然保护区”，其中包含有很多属性信
息，“<span class="token constant">ISO3</span>”指的是<span class="token number">3</span> 字母国家代码。

第二是<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的功能是利用属性进行筛选，其三个参数分别是“筛选字段”，“关系”和“筛选值”，其中“关系”字段包括<span class="token string">"equals"</span><span class="token punctuation">,</span> <span class="token string">"less_than"</span><span class="token punctuation">,</span><span class="token string">"greater_than"</span><span class="token punctuation">,</span><span class="token string">"not_equals"</span><span class="token punctuation">,</span><span class="token string">"not_less_than"</span><span class="token punctuation">,</span><span class="token string">"not_greater_than"</span><span class="token punctuation">,</span><span class="token string">"starts_with"</span><span class="token punctuation">,</span><span class="token string">"ends_with"</span><span class="token punctuation">,</span><span class="token string">"not_starts_with"</span><span class="token punctuation">,</span><span class="token string">"not_ends_with"</span><span class="token punctuation">,</span> <span class="token string">"contains"</span><span class="token punctuation">,</span><span class="token string">"not_contains"</span>。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>FeatureCollection的数量限制命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

数量限制命令<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>有三个参数，分别是“最大数量”，“限制字段”和“是否从小到大”。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>时间筛选命令</p>
<p>由于带有时间属性的FeatureCollection数据很少，这里用ImageCollection替代</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Landsat_FilterDate <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2019-03-01'</span><span class="token punctuation">,</span><span class="token string">'2019-03-16'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>；
<span class="token function">print</span><span class="token punctuation">(</span>Landsat_FilterDate<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>空间筛选命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> CQ_Point <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">106.92371845031437</span><span class="token punctuation">,</span> <span class="token number">29.430312117372274</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">CQ</span> <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>CQ_Point<span class="token punctuation">)</span>；

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'FF0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_Point<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>选择复制命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Area <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Shape_Area'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>；
<span class="token function">print</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Area<span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Area<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>去除重复命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Area <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Area<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Area<span class="token punctuation">)</span>

去除重复命令<span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的作用是去除具有相同属性Feature<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>融合和联合命令</p>
<p>联合的效果是形成一个单独的Feature，并且抹去所有属性。 融合是将两个Collection 合并为一个。</p>
<p>联合</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Union <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Union<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Union<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>融合</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Chongqing <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Chong_Qing'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Si_Chuan <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Si_Chuan'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> CQ_SC_Merge <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>Si_Chuan<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Chongqing<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Si_Chuan<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'0000ff'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>CQ_SC_Merge<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>属性改写</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Chongqing <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Chong_Qing'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Si_Chuan <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Si_Chuan'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> CQ_SC_Merge <span class="token operator">=</span> Chongqing<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>Si_Chuan<span class="token punctuation">)</span>
<span class="token keyword">var</span> CQ_SC_Merge_Set <span class="token operator">=</span> CQ_SC_Merge<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Chuan_Yu'</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>操作增加了”<span class="token constant">NAME</span>“对应的属性”Chuan_Yu“


同样也可以通过<span class="token punctuation">.</span><span class="token function">setMulti</span><span class="token punctuation">(</span><span class="token punctuation">)</span>改写

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Remap命令(批量修改)</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Old_Provinces_ID <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">19</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span>
<span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">37</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">39</span><span class="token punctuation">,</span><span class="token number">1089</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> New_Provinces_ID <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> China_Remap <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">remap</span><span class="token punctuation">(</span>Old_Provinces_ID<span class="token punctuation">,</span>New_Provinces_ID<span class="token punctuation">,</span><span class="token string">'OBJECTID'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> China_Provinces_Map <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'OBJECTID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token keyword">var</span> China_Remap_Map <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'OBJECTID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces_Map<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'16ff07,2901ff'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'China_Provinces_Map'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Remap_Map<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'ff7248,fbff21,09ffe8'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'China_Remap_Map'</span><span class="token punctuation">)</span>


<span class="token punctuation">.</span><span class="token function">remap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令理解为对Feature进行“批量修改”。该命令有三个参数，分别是“修改前的值”，“修改后的值”和“要修改的Key”。本例的效果相当于将中国的省边界重新分为了<span class="token number">7</span>类<span class="token punctuation">.</span>

<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的功能是“矢量转栅格”

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>排序命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Sort_Area <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//从大到小</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Sort_Area<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff000000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

排序命令<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>共有两个参数，一个是“排序字段”，另一个是“是否从小到大”。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 的提取Geometry 命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> China_Geometry <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>China_Geometry<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 的矢量转栅格命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> China_to_Image <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'OBJECTID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_to_Image<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"ff9c07"</span><span class="token punctuation">,</span><span class="token string">"f0ff1b"</span><span class="token punctuation">,</span><span class="token string">"1aff0b"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

矢量转栅格<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>共有两个参数，第一个是“依据字段”，第二个是“数值处理”。本例中我们利用ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的目的是不对数值进行任何处理。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 的取首个数据命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> China_Biggest_Province <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>China_Biggest_Province<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Biggest_Province<span class="token punctuation">)</span>

取首个<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令的常见目的是观察Feature Collection 中数据的属性或者结构。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 转List 命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> China_List <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>China_List<span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_No_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>China_List<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_No_3 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>China_List<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_No_7 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Feature</span><span class="token punctuation">(</span>China_List<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Area_No_1<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Area_No_3<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Area_No_7<span class="token punctuation">)</span>

前述及介绍过List 是一个“数据框”。当Feature Collection 转为List 之后，我们就可通过<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令获取指定位置的Feature。
本例对Feature Collection 进行排序并转List 之后，获取了中国面积大小排第<span class="token number">1</span>、第<span class="token number">3</span> 和第<span class="token number">7</span> 的三个省。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 属性统计命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_of_No_1 <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">aggregate_first</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_of_Top_3 <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">aggregate_array</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_Status <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">aggregate_stats</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Area_Histogram <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">aggregate_histogram</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>Area_of_No_1<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Area_of_Top_3<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Area_Status<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Area_Histogram<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Feature Collection 的.map()命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">Add_Center</span> <span class="token punctuation">(</span><span class="token parameter">feature</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> feature<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//中心点</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> China_Center <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Add_Center<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>China_Center<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>China_Center<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


Feature Collection 的<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令可以看做是一种“集合操作”，本例的目的是对所有的Feature 添加中心坐标，此时可以通过<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令编写一个计算中心点的操作，然后利用<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令将这个操作应用于整体Feature Collection 中。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>常用FeatureCollection 命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">randomPoints</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">remap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">makeArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">reduceToImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">aggregate_first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">.</span><span class="token function">aggregate_array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span>aggregate_stats<span class="token operator">/</span>_histogram<span class="token operator">/</span>_count<span class="token operator">/</span><span class="token function">_count_distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span>aggregate_max<span class="token operator">/</span>_min<span class="token operator">/</span>_sum<span class="token operator">/</span>_mean<span class="token operator">/</span><span class="token function">_product</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span>aggregate_sample_var<span class="token operator">/</span>_total_var<span class="token operator">/</span>_sample_sd<span class="token operator">/</span>_total_sd<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3、Image"><a href="#3、Image" class="headerlink" title="3、Image"></a>3、Image</h3><p>GEE 中常见的栅格图像数据。第一种是遥感图像，包括Landsat，Sentinel 和MODIS 系列卫星的所有图像数据。第二种是地形影像，主要是90m 和30m 精度的SRTM影像，以及局部地区的高精度地形影像。第三种则是其他影像，包括土地利用图像、气象图像等。</p>
<p>栅格数据的创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Image_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Image_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">constant</span><span class="token punctuation">(</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Image_3 <span class="token operator">=</span> Image_1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Image_2<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Image_1<span class="token punctuation">,</span>Image_2<span class="token punctuation">,</span>Image_3<span class="token punctuation">)</span><span class="token punctuation">;</span>

此时创建的栅格数据没有“分辨率”的概念，或者说此时栅格的分辨率无限小，任意位置都是指定的常数。

常数栅格的创建常常见于遥感图像的时序分析，被当做方程中的常量。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>掩膜分析(mask)</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Image_DEM <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token string">'CGIAR/SRTM90_V4'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Image_Cropland <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"ESA/GLOBCOVER_L4_200901_200912_V2_3"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'landcover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Image_Masked <span class="token operator">=</span> Image_DEM<span class="token punctuation">.</span><span class="token function">mask</span><span class="token punctuation">(</span> Image_Cropland <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span>Image_DEM<span class="token punctuation">,</span>Image_Cropland<span class="token punctuation">,</span>Image_Masked<span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.4</span><span class="token punctuation">,</span> <span class="token number">34.78</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Image_DEM<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token string-property property">"opacity"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"elevation"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">1400</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"2dff07"</span><span class="token punctuation">,</span><span class="token string">"ff0b0b"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">' Image_DEM '</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Image_Cropland<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token string-property property">"opacity"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"landcover"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"ffffff"</span><span class="token punctuation">,</span><span class="token string">"fbff2d"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">' Image_Cropland '</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Image_Masked<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token string-property property">"opacity"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"elevation"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">1400</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"2dff07"</span><span class="token punctuation">,</span><span class="token string">"ff0b0b"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'Image_Masked '</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格裁剪</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">CQ</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">106.8</span><span class="token punctuation">,</span> <span class="token number">29.3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token constant">CQ_DEM</span> <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.8</span><span class="token punctuation">,</span> <span class="token number">29.3</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">CQ_DEM</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

栅格图像的掩膜操作只是给<span class="token constant">GEE</span> 指出图像的哪些部分不参加运算。
而栅格的裁剪<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>则是直接将裁剪数据意外的部分删除。但在多数情况下，两者可以互用。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格选择创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Glob_Cover <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"ESA/GLOBCOVER_L4_200901_200912_V2_3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Land_cover <span class="token operator">=</span> Glob_Cover<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'landcover'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Land_cover_quality <span class="token operator">=</span> Glob_Cover<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'qa'</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">107.56</span><span class="token punctuation">,</span> <span class="token number">34.79</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Land_cover<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Land_cover_quality<span class="token punctuation">)</span>

<span class="token constant">GLOBCOVER_L4_2009</span> 数据包含两个波段，一个波段是“landcover”，用来说明土地利用类型。
<span class="token function">另一个波段是“qa”，用来说明某位置的数据来源</span><span class="token punctuation">(</span><span class="token number">0</span> 表示来源于<span class="token constant">GLOBCOVER</span> 项目，<span class="token number">1</span> 表示来源于其他数据集<span class="token punctuation">)</span>。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>波段裁取创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_One <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.4958</span><span class="token punctuation">,</span> <span class="token number">29.5856</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> L8_Slice <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span>L8_Slice<span class="token punctuation">)</span>

波段裁取命令的两个参数分别表示裁取的起始和结束位置，由于代码语言中是从<span class="token number">0</span> 开始计数的，所以本例中的<span class="token number">2</span> 和<span class="token number">5</span> 分别表示第<span class="token number">3</span> 和第<span class="token number">6</span> 个位置。同时也可以看出，波段裁取只执行到结束位置的前一个位置。 （左闭右开）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的添加</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_One <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.4958</span><span class="token punctuation">,</span> <span class="token number">29.5856</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">L8_B5</span> <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">L8_B4</span> <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token constant">L8_B5_4</span> <span class="token operator">=</span> <span class="token constant">L8_B5</span><span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span><span class="token constant">L8_B4</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">L8_B5</span><span class="token punctuation">,</span><span class="token constant">L8_B4</span><span class="token punctuation">,</span><span class="token constant">L8_B5_4</span><span class="token punctuation">)</span>

添加波段<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的重投影</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_One <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_Reproject <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">reproject</span><span class="token punctuation">(</span><span class="token string">"EPSG:3857"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token function">print</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"B1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>L8_Reproject<span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B5"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token number">10586</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">18154</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"L8_One_30m"</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_Reproject<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B5"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token number">10586</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">18154</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"L8_Reproject_30m"</span><span class="token punctuation">)</span>


这里注意，矢量的重投影命令是<span class="token punctuation">.</span><span class="token function">transpose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，而栅格的重投影命令式<span class="token punctuation">.</span><span class="token function">Reproject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>两者的操作目的是相同的，但却是不可混用的两个命令。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的色彩转换</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_One <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.4958</span><span class="token punctuation">,</span> <span class="token number">29.5856</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">unitScale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">32468</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">L8_HSV</span> <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">rgbToHsv</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">L8_RGB</span> <span class="token operator">=</span> <span class="token constant">L8_HSV</span><span class="token punctuation">.</span><span class="token function">hsvToRgb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span><span class="token constant">L8_HSV</span><span class="token punctuation">,</span><span class="token constant">L8_RGB</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.5</span><span class="token punctuation">,</span> <span class="token number">29.5</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'Origin'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">L8_HSV</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'HSV'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">L8_RGB</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'RGB'</span><span class="token punctuation">)</span>


rgbToHsv
hsvToRgb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格数字格式转换</p>
<p><strong>与前述例子相同</strong></p>
<table>
<thead>
<tr>
<th align="center">.uint8 		.uint16 		.uint32		 .uint64 		.int8</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.toUnit8 		toUint16		 toUint32		 toUint64		 toInt8</td>
</tr>
<tr>
<td align="center">.int16		 .int32		 .int64 		.long 		.float 		.double</td>
</tr>
<tr>
<td align="center">.toInt16		.toInt32		 .toInt64 		.toLong 		.toFloat 		.toDouble</td>
</tr>
</tbody></table>
<p>属性改写</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_One <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'note'</span><span class="token punctuation">,</span><span class="token string">"This image was created by 'rgbToHsv()'"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">setMulti</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">'author'</span><span class="token operator">:</span><span class="token string">'Jinzhu Wang'</span><span class="token punctuation">,</span> <span class="token string-property property">'mood'</span><span class="token operator">:</span><span class="token string">'Not Bad'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">)</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>Remap命令</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Old_Id <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">110</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">170</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">190</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">210</span><span class="token punctuation">,</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">230</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> New_Id <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Land_Cover <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"ESA/GLOBCOVER_L4_200901_200912_V2_3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'landcover'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Land_Remap <span class="token operator">=</span> Land_Cover<span class="token punctuation">.</span><span class="token function">remap</span><span class="token punctuation">(</span>Old_Id<span class="token punctuation">,</span>New_Id<span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">'landcover'</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">102.919</span><span class="token punctuation">,</span> <span class="token number">30.199</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Land_Cover<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Land_Remap<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"f1ff27"</span><span class="token punctuation">,</span><span class="token string">"35ce48"</span><span class="token punctuation">,</span><span class="token string">"07fff3"</span><span class="token punctuation">,</span><span class="token string">"f017ff"</span><span class="token punctuation">,</span><span class="token string">"e78845"</span><span class="token punctuation">,</span><span class="token string">"250bff"</span><span class="token punctuation">,</span><span class="token string">"ffffff"</span><span class="token punctuation">,</span><span class="token string">"ffffff"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'remaped'</span><span class="token punctuation">)</span>



上述remap 命令相当于对栅格value 值的“重分类”操作。
通过remap操作，原始土地利用分类图像被重新归纳成了“耕、林、水、草、建等”<span class="token number">9</span>种地类<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格区间赋值</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Land_Cover <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"ESA/GLOBCOVER_L4_200901_200912_V2_3"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'landcover'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> High_Land <span class="token operator">=</span> Land_Cover<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">88.96</span><span class="token punctuation">,</span> <span class="token number">33.77</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>High_Land<span class="token punctuation">)</span>


区间赋值<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token function">，lt</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>的含义是将高程小于<span class="token number">4000</span>的地区赋值为<span class="token number">0</span>

<span class="token punctuation">.</span><span class="token function">clapm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的功能是截取某一段区间的值，大于或小于这个区间的值都以最大或最小值处理，例如<span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">450</span><span class="token punctuation">,</span><span class="token number">759</span><span class="token punctuation">)</span>的作用就是将高程大于<span class="token number">795</span>米的地区赋值为<span class="token number">795</span>，小于<span class="token number">450</span>的地区赋值为<span class="token number">450</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格一值化</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> L8_One <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.5776</span><span class="token punctuation">,</span> <span class="token number">29.5577</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_Unitscale <span class="token operator">=</span> L8_One<span class="token punctuation">.</span><span class="token function">unitScale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">32767</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span>L8_Unitscale<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_One<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B5"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">30000</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_Unitscale<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B5"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">0.92</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>


一值化的功能在于将给定区间内的数值范围转换为<span class="token number">0</span><span class="token operator">-</span><span class="token number">1</span> 的区间，
当对原图像进行一值化后，新图像显示范围最大值<span class="token number">0.92</span> 与原图像显示范围最大值<span class="token number">30000</span> 是相同的，因为<span class="token number">30000</span><span class="token operator">/</span><span class="token number">32767</span> <span class="token operator">=</span> <span class="token number">0.92</span>。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格插值</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Add_Center</span> <span class="token punctuation">(</span><span class="token parameter">feature</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> ee<span class="token punctuation">.</span><span class="token function">Geometry</span><span class="token punctuation">(</span>feature<span class="token punctuation">.</span><span class="token function">centroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">var</span> Provinces_Centers <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Add_Center<span class="token punctuation">)</span>
<span class="token keyword">var</span> Center_Distance <span class="token operator">=</span> Provinces_Centers<span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span><span class="token number">200000</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Distance_Interpolate <span class="token operator">=</span> Center_Distance<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">150000</span><span class="token punctuation">,</span> <span class="token number">200000</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">75</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'extrapolate'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>Provinces_Centers<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Center_Distance<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">200000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'origin'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Distance_Interpolate<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'interpolated'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Provinces_Centers<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'0000ff'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'centers'</span><span class="token punctuation">)</span>

注意插值方式为“extrapolate”，这种插值的效果是按照<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的第二个参数值来确定插值大小，相当于分阶段的线性运算。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的比较筛选</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> night_Lights <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182013'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'stable_lights'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span>China<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> urban <span class="token operator">=</span> night_Lights<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">115.218</span><span class="token punctuation">,</span> <span class="token number">33.697</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>urban<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token string-property property">"opacity"</span><span class="token operator">:</span><span class="token number">0.33</span><span class="token punctuation">,</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"stable_lights"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"171801"</span><span class="token punctuation">,</span><span class="token string">"fbff0f"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'Nighttime Lights'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


比较筛选命令还有：
等于（<span class="token punctuation">.</span>eq）<span class="token punctuation">,</span>不等于（<span class="token punctuation">.</span>neq<span class="token punctuation">)</span><span class="token punctuation">,</span>大于（<span class="token punctuation">.</span>gt<span class="token punctuation">)</span><span class="token punctuation">,</span>大于等于（<span class="token punctuation">.</span>gte<span class="token punctuation">)</span><span class="token punctuation">,</span>小于（<span class="token punctuation">.</span>lt<span class="token punctuation">)</span><span class="token punctuation">,</span>小于等于（<span class="token punctuation">.</span>lte<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的逻辑运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>；<span class="token comment">//导入中国省份矢量</span>
<span class="token keyword">var</span> night_Lights <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182013'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'stable_lights'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span>China<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//导入夜光数据，选择属性为stable_lights，裁剪区域为中国</span>

<span class="token keyword">var</span> urban <span class="token operator">=</span> night_Lights<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">//城市的夜光值大于20</span>
<span class="token keyword">var</span> Low_Area <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span>China<span class="token punctuation">)</span><span class="token comment">//导入高程，筛选小于20，裁剪为中国</span>
<span class="token keyword">var</span> Low_Urban <span class="token operator">=</span> urban<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>Low_Area<span class="token punctuation">)</span> <span class="token comment">//低海拔且夜光值大于20的地区</span>

<span class="token function">print</span><span class="token punctuation">(</span>Low_Area<span class="token punctuation">,</span>urban<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">115.218</span><span class="token punctuation">,</span> <span class="token number">33.697</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>night_Lights<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Low_Area<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Low_Urban<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格数学运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">   <span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.5749</span><span class="token punctuation">,</span> <span class="token number">29.5588</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">B5</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B5'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">B4</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B4'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">B3</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">NDVI</span> <span class="token operator">=</span> <span class="token constant">B5</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token constant">B4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token constant">B5</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token constant">B3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span><span class="token constant">NDVI</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">NDVI</span><span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"0f01e2"</span><span class="token punctuation">,</span><span class="token string">"ff9d93"</span><span class="token punctuation">,</span><span class="token string">"fff707"</span><span class="token punctuation">,</span><span class="token string">"11ff2e"</span><span class="token punctuation">,</span><span class="token string">"04ce14"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的表达式运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_RT"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.5749</span><span class="token punctuation">,</span> <span class="token number">29.5588</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> evi <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">expression</span><span class="token punctuation">(</span>
<span class="token string">'2.5 * ((NIR - RED) / (NIR + 6 * RED - 7.5 * BLUE + 1))'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
<span class="token string-property property">'NIR'</span><span class="token operator">:</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B5'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string-property property">'RED'</span><span class="token operator">:</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string-property property">'BLUE'</span><span class="token operator">:</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B2'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>evi<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>evi<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"0f01e2"</span><span class="token punctuation">,</span><span class="token string">"ff9d93"</span><span class="token punctuation">,</span><span class="token string">"fff707"</span><span class="token punctuation">,</span><span class="token string">"11ff2e"</span><span class="token punctuation">,</span><span class="token string">"04ce14"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>



表达式运算命令有两个参数，第一个参数以文本形式描绘出运算规则，第二个参数以字
典形式制定运算规则中变量制定的具体波段。

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的位运算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Image_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Image_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Bit_And <span class="token operator">=</span> Image_1<span class="token punctuation">.</span><span class="token function">bitwiseAnd</span><span class="token punctuation">(</span> Image_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Bit_Or <span class="token operator">=</span> Image_1<span class="token punctuation">.</span><span class="token function">bitwiseOr</span><span class="token punctuation">(</span> Image_2 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span> <span class="token punctuation">(</span> <span class="token string">'Image of bitwise 1 and 2 ='</span><span class="token punctuation">,</span> Bit_And <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span> <span class="token punctuation">(</span> <span class="token string">'Image of bitwise 1 or 2 ='</span><span class="token punctuation">,</span> Bit_Or <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Image_1<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Image of 1s'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Image_2<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Image of 2s'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Bit_And<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Image of Bits from Both'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Bit_Or <span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'Image of Bits from Either'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

栅格图像的位运算在本质上与数字的位运算是相同的，即都是将十进制数字转换成二进制数字后，通过对相同位置的二进制数字进行逻辑对比得到最终结果。

<span class="token function">位运算在栅格中的主要作用是用作去云处理，其原理是</span><span class="token punctuation">(</span>主要针对Landsat 系列数据<span class="token punctuation">)</span><span class="token function">遥感图像每个像素都存在类似“头文件”的十几个字节的数据，其中有若干字节的数据可以表示这个像素是否被云层覆盖</span><span class="token punctuation">(</span><span class="token number">0</span> 代表无云，<span class="token number">1</span> 代表有云<span class="token punctuation">)</span>，对部分数据进行位运算筛选即可得到去云目的。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>位运算</p>
<p>bitwiseAnd    bitwiseOr    bitwiseXor     bitwiseNot    leftShift     rightShift<br>bitwise_and   bitwise_or   bitwise_xor   bitwise_not   left_shift    right_shift</p>
<p>栅格微分操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> OldIMAGE <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token string">'CGIAR/SRTM90_V4'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> NewIMAGE <span class="token operator">=</span> OldIMAGE<span class="token punctuation">.</span><span class="token function">derivative</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.4448</span><span class="token punctuation">,</span> <span class="token number">29.5684</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> NewIMAGE<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'elevation_x'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">90</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Slope from Left to Right'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> NewIMAGE<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'elevation_y'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">90</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Slope from Top to Bottom'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


该命令的功能是计算图像像素值在<span class="token constant">X</span><span class="token punctuation">(</span>横<span class="token punctuation">)</span>和<span class="token constant">Y</span><span class="token punctuation">(</span>纵<span class="token punctuation">)</span>方向上的数值变化率。将两者进行
<span class="token function">atan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>运算，并且求取运算后两值平方和的平方根就得到了坡度。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>栅格的地形操作</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token string">'CGIAR/SRTM90_V4'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Terrain <span class="token operator">=</span> ee<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span><span class="token function">products</span><span class="token punctuation">(</span> <span class="token constant">DEM</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token number">106.371</span><span class="token punctuation">,</span> <span class="token number">29.6188</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> <span class="token constant">DEM</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'000099,dddd00'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Elevation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Terrain<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'slope'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'000000,ff0000'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Slope'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Terrain<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'aspect'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'00ff00,0000ff,00ff00'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'Aspect'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Terrain<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'hillshade'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Hillshading'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>函数</p>
<p>ee.reducerRegion()</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//缩减是采用任意数量的输入（例如给定区域中图像的所有像素）并计算一个或多个固定输出的任何过程。 结果是一个包含计算值的字典，在本例中是该区域中的最大像素值。</span>
<span class="token comment">//缩减器，使用计算最大像素值得缩减器缩小到给定区域内得图像。 eg.此处是将poly区域内影像空间分辨率reducer到200m</span>
ee<span class="token punctuation">.</span><span class="token function">reducerRegion</span><span class="token punctuation">(</span>
	reducer：ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">geomtry</span><span class="token operator">:</span>poly<span class="token punctuation">,</span>
    <span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">200</span>
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>join函数</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//join函数得基本格式是join.apply(),该命令有三个参数，分别是左侧数据集，右侧数据集和连接条件，其中连接条件是一个筛选器ee.Filter()。对于筛选器来说，需要制定的参数包括“左侧数据集连接词”，“右侧数据集连接词”和“筛选条件”。</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>



<p>ee.ImageCollection.fromImages</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//将多个list合并为一个imageCollection，返回包含给定图像的图像集合imageCollection。</span>
ee<span class="token punctuation">.</span>ImageCollection<span class="token punctuation">.</span><span class="token function">fromImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>



<p>Reducer：Reducer是GEE中按照时间、空间、波段等进行整合数据的方法；类似于从部分到整体。</p>
<h3 id="4、ImageCollection"><a href="#4、ImageCollection" class="headerlink" title="4、ImageCollection"></a>4、ImageCollection</h3><p>ImageCollection与FeatureCollection有很多命令是重复的。</p>
<p>最后Confusion、Marix 常用于遥感分类图像的验证。</p>
<p>ImageCollection的创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Night_Light <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span> <span class="token string">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> image_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> image_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> collection <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token punctuation">[</span>image_1<span class="token punctuation">,</span>image_2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Night_Light<span class="token punctuation">,</span>collection<span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token number">107.54</span><span class="token punctuation">,</span> <span class="token number">34.37</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Night_Light<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span><span class="token number">0.7</span><span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ImageCollection的筛选</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>China<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'CLOUD_COVER'</span><span class="token punctuation">,</span><span class="token string">'less_than'</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token number">107.753</span><span class="token punctuation">,</span> <span class="token number">34.238</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> <span class="token constant">L8</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token string">'B4,B3,B2'</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.2</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Original Images'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

此处筛选是”正常的筛选“，参考以下代码：
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>China<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">Bounds</span><span class="token punctuation">(</span>China<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterMetadata</span> <span class="token punctuation">(</span>‘<span class="token constant">CLOUD_COVER</span>’<span class="token punctuation">,</span>‘less_than’<span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">Metadata</span><span class="token punctuation">(</span>‘<span class="token constant">CLOUD_COVER</span>’<span class="token punctuation">,</span>‘less_than’<span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ImageCollection的限制筛选</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.5487</span><span class="token punctuation">,</span> <span class="token number">29.5444</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-03-01'</span><span class="token punctuation">,</span><span class="token string">'2019-03-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> L8_Limit <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> <span class="token constant">L8</span><span class="token punctuation">,</span> L8_Limit <span class="token punctuation">)</span><span class="token punctuation">;</span>

限制数量为<span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>ImageCollection的选择创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.5487</span><span class="token punctuation">,</span> <span class="token number">29.5444</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-03-01'</span><span class="token punctuation">,</span><span class="token string">'2019-03-01'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_Select <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">,</span><span class="token string">'B3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'Near infrared'</span><span class="token punctuation">,</span><span class="token string">'Red'</span><span class="token punctuation">,</span><span class="token string">'Green'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">'Original'</span><span class="token punctuation">,</span> <span class="token constant">L8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> <span class="token string">'Selected'</span><span class="token punctuation">,</span> L8_Select <span class="token punctuation">)</span><span class="token punctuation">;</span>

选择创建命令<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的功能是创建基于源数据的“副本”，同时，通过指定第二个参数值，还可以对副本数据属性进行重命名。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>.map 命令</p>
<p>.map 命令是对矢量或者栅格数据集中的每一个数据都进行同样的操作。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">107.193</span><span class="token punctuation">,</span> <span class="token number">29.1373</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B[4,5]'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">add_NDVI</span> <span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> <span class="token constant">NDVI</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">//.normalizedDifference 命令是进行归一化差值运算</span>
    <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span><span class="token constant">NDVI</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> <span class="token constant">L8_NDVI</span> <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>add_NDVI<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">L8</span><span class="token punctuation">,</span><span class="token constant">L8_NDVI</span><span class="token punctuation">)</span>


本例中，通过<span class="token keyword">function</span> 命令编辑了添加<span class="token constant">NDVI</span> 的命令，然后利用<span class="token punctuation">.</span>map 将这个命令统一运用到Image Collection 里，达到给Image Collection 里每个图像添加<span class="token constant">NDVI</span> 的目的。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h2 id="三、案例分析"><a href="#三、案例分析" class="headerlink" title="三、案例分析"></a>三、案例分析</h2><h3 id="1、NDWI计算—-以Landsat8为例"><a href="#1、NDWI计算—-以Landsat8为例" class="headerlink" title="1、NDWI计算—-以Landsat8为例"></a>1、NDWI计算—-以Landsat8为例</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//landsat NDWI demo</span>
<span class="token keyword">function</span> <span class="token constant">NDWI_V1</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> nir <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"B5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> green <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"B3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ndwi <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">expression</span><span class="token punctuation">(</span>
    <span class="token string">"(Green-Nir)/(Green+Nir)"</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string-property property">"Green"</span><span class="token operator">:</span>green<span class="token punctuation">,</span>
      <span class="token string-property property">"Nir"</span><span class="token operator">:</span>nir
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ndwi<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//landsat8 image and roi</span>
<span class="token keyword">var</span> l8_col <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC8_L1T_TOA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> roi <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">124.1455078125</span><span class="token punctuation">,</span><span class="token number">45.644768217751924</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span>l8_col<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">"2017-02-01"</span><span class="token punctuation">,</span> <span class="token string">"2017-09-23"</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ndwi <span class="token operator">=</span> <span class="token constant">NDWI_V1</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> visParam <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'00FFFF'</span><span class="token punctuation">,</span> <span class="token string">'0000FF'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B4"</span><span class="token punctuation">,</span> <span class="token string">"B3"</span><span class="token punctuation">,</span> <span class="token string">"B2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">"raw_img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>ndwi<span class="token punctuation">,</span>visParam<span class="token punctuation">,</span><span class="token string">"ndwi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//show charts</span>
<span class="token keyword">var</span> ndwi_list <span class="token operator">=</span> l8_col<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">"2017-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2017-09-23"</span><span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
                        <span class="token keyword">var</span> cloud <span class="token operator">=</span> ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span>Landsat<span class="token punctuation">.</span><span class="token function">simpleCloudScore</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"cloud"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">var</span> mask <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">var</span> ndwi <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"B3"</span><span class="token punctuation">,</span><span class="token string">"B5"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'NDWI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span>ndwi<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> chart1 <span class="token operator">=</span> ui<span class="token punctuation">.</span>Chart<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">imageCollection</span><span class="token operator">:</span>ndwi_list<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"NDWI"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">region</span><span class="token operator">:</span>roi<span class="token punctuation">,</span>
  <span class="token literal-property property">reducer</span><span class="token operator">:</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">30</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">"title"</span><span class="token operator">:</span><span class="token string">"NDWI IMAGE SERIES"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>chart1<span class="token punctuation">)</span>

<span class="token keyword">var</span> chart2 <span class="token operator">=</span>  ui<span class="token punctuation">.</span>Chart<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">doySeries</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">imageCollection</span><span class="token operator">:</span>ndwi_list<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">"NDWI"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">region</span><span class="token operator">:</span>roi<span class="token punctuation">,</span>
  <span class="token literal-property property">regionReducer</span><span class="token operator">:</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scale</span><span class="token operator">:</span><span class="token number">30</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token string-property property">"title"</span><span class="token operator">:</span><span class="token string">"ROI NDWI DAY SERIES"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>chart2<span class="token punctuation">)</span>


图表是生成的为<span class="token constant">NDWI</span>值序列


函数<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"b1"</span><span class="token punctuation">,</span><span class="token string">"b2"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 计算<span class="token constant">NDVI</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2、栅格的山体阴影操作-Map组件"><a href="#2、栅格的山体阴影操作-Map组件" class="headerlink" title="2、栅格的山体阴影操作&#x2F; Map组件"></a>2、栅格的山体阴影操作&#x2F; Map组件</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span> <span class="token string">'CGIAR/SRTM90_V4'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> DEM_Mercator <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">reproject</span><span class="token punctuation">(</span> <span class="token string">'EPSG:3857'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">30</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Shadow_1 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span><span class="token function">hillShadow</span><span class="token punctuation">(</span> DEM_Mercator<span class="token punctuation">,</span> <span class="token number">315.0</span><span class="token punctuation">,</span> <span class="token number">75.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Shadow_2 <span class="token operator">=</span> ee<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span><span class="token function">hillShadow</span><span class="token punctuation">(</span> DEM_Mercator<span class="token punctuation">,</span> <span class="token number">315.0</span><span class="token punctuation">,</span> <span class="token number">70.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token number">106.5568</span><span class="token punctuation">,</span> <span class="token number">29.5527</span><span class="token punctuation">,</span> <span class="token number">12</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> <span class="token constant">DEM</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1500</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token string">'0000ff,ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Elevation'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Shadow_1<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Longer Shadows'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Shadow_2<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">opacity</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Shorter Shadows'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>



ee<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span>hillShadow 能更加个性化的调整阴影状态，该命令一共有<span class="token number">5</span> 个参数，分别是“图像”，“天顶角”，“太阳高度角”，“邻域大小”和“是否磁滞”。其中“是否磁滞”如果输入为<span class="token boolean">true</span>，会降低阴影的准确性，但是会提高阴影的显示效果。


<span class="token punctuation">.</span><span class="token function">setcenter</span><span class="token punctuation">(</span>lon，lat<span class="token punctuation">,</span> zoom<span class="token punctuation">,</span>dragging<span class="token punctuation">,</span>forceChange<span class="token punctuation">)</span>函数是设置地图中心位置，
lonlat是中心xy坐标，zoom为缩放比例，dragging <span class="token punctuation">&#123;</span>Boolean<span class="token punctuation">&#125;</span> 指定是否触发movestart<span class="token operator">/</span>end 事件 ， forceZoomChange <span class="token punctuation">&#123;</span>Boolean<span class="token punctuation">&#125;</span> 指定是否触发zoomchange事件，依赖于baseLayer的变化

<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> zoom<span class="token punctuation">)</span> 以object对象范围居中显示，同时设置缩放级别为zoom

<span class="token function">addLayer</span><span class="token punctuation">(</span>eeObject<span class="token punctuation">,</span> visParams<span class="token punctuation">,</span> name<span class="token punctuation">,</span> shown<span class="token punctuation">,</span> opacity<span class="token punctuation">)</span> 添加图层到Map上
min<span class="token punctuation">,</span>max这些表示要在屏幕上显示的波段值的下限和上限。默认情况下，提供的最小值映射为黑色，提供的最大值映射为白色。最小值和最大值之间的值线性映射为黑色和白色之间的灰度。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3、栅格填洼操作"><a href="#3、栅格填洼操作" class="headerlink" title="3、栅格填洼操作"></a>3、栅格填洼操作</h3><p>填充表面栅格中的洼地以移除数据中的小缺陷。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">'CGIAR/SRTM90_V4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> DEM_Fill <span class="token operator">=</span> ee<span class="token punctuation">.</span>Terrain<span class="token punctuation">.</span><span class="token function">fillMinima</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">107.8729</span><span class="token punctuation">,</span> <span class="token number">29.2441</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Fill<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1500</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"2f5bff"</span><span class="token punctuation">,</span><span class="token string">"0dff09"</span><span class="token punctuation">,</span><span class="token string">"efff05"</span><span class="token punctuation">,</span><span class="token string">"ff9931"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"Unfilled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Fill<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1500</span><span class="token punctuation">,</span> <span class="token literal-property property">palette</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"2f5bff"</span><span class="token punctuation">,</span><span class="token string">"0dff09"</span><span class="token punctuation">,</span><span class="token string">"efff05"</span><span class="token punctuation">,</span><span class="token string">"ff9931"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"Filled"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="4、栅格的卷积操作"><a href="#4、栅格的卷积操作" class="headerlink" title="4、栅格的卷积操作"></a>4、栅格的卷积操作</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token operator">=</span> <span class="token constant">KERNEL</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">fixed</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Convolve_DEM <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span><span class="token constant">KERNEL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">105.8125</span><span class="token punctuation">,</span> <span class="token number">29.4033</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"DEM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Convolve_DEM<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">12000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"Convolve_Dem"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="5、栅格的邻域缩减操作"><a href="#5、栅格的邻域缩减操作" class="headerlink" title="5、栅格的邻域缩减操作"></a>5、栅格的邻域缩减操作</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> DEM_ReduceNeighbor <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">reduceNeighborhood</span><span class="token punctuation">(</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span> <span class="token number">105.9479</span><span class="token punctuation">,</span> <span class="token number">29.4165</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'DEM'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_ReduceNeighbor<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'DEM_ReduceNeighbor'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="6、栅格转矢量"><a href="#6、栅格转矢量" class="headerlink" title="6、栅格转矢量"></a>6、栅格转矢量</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Water <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"ESA/GLOBCOVER_L4_200901_200912_V2_3"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'landcover'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">209</span><span class="token punctuation">,</span><span class="token number">211</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> geometry <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">106.32728668689242</span><span class="token punctuation">,</span> <span class="token number">29.46329064748005</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">106.76948639392367</span><span class="token punctuation">,</span> <span class="token number">29.462692803378452</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">106.77017303943148</span><span class="token punctuation">,</span> <span class="token number">29.65740304071832</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">[</span><span class="token number">106.31355377673617</span><span class="token punctuation">,</span> <span class="token number">29.654419523039962</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Water_Vecter <span class="token operator">=</span> Water<span class="token punctuation">.</span><span class="token function">reduceToVectors</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> geometry<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'polygon'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Water_BoundBox <span class="token operator">=</span> Water<span class="token punctuation">.</span><span class="token function">reduceToVectors</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> geometry<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'bb'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Water_Center_4 <span class="token operator">=</span> Water<span class="token punctuation">.</span><span class="token function">reduceToVectors</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> geometry<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'centroid'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Water_Center_8 <span class="token operator">=</span> Water<span class="token punctuation">.</span><span class="token function">reduceToVectors</span><span class="token punctuation">(</span> <span class="token keyword">null</span><span class="token punctuation">,</span> geometry<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'centroid'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.5587</span><span class="token punctuation">,</span> <span class="token number">29.5631</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Water<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"ffffff"</span><span class="token punctuation">,</span><span class="token string">"1707ff"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'Water'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Water_Vecter<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'dddddd'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'The Polygons'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Water_BoundBox<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'888888'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'The Bounding Boxes'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Water_Center_4<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'4-way Centroids'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span> Water_Center_8<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ffffff'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'8-way Centroids'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


栅格转矢量共有<span class="token number">12</span> 个参数，这里着重介绍第<span class="token number">4</span> 个“矢量类型”和第五个“是否计算斜边”。
矢量类型共有三种：“polygon”，“bb”和“centroid”，分别代表不规则面、矩形和点。

是否计算斜边的功能是告诉<span class="token constant">GEE</span> <span class="token function">栅格转矢量的时候是否要把斜向相接</span><span class="token punctuation">(</span>除了上下左右之外的其他四个方向<span class="token punctuation">)</span>的栅格算作矢量的一部分。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="7、栅格输出操作"><a href="#7、栅格输出操作" class="headerlink" title="7、栅格输出操作"></a>7、栅格输出操作</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> dem <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> roi <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">106.20650888671878</span><span class="token punctuation">,</span> <span class="token number">29.570337903152346</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">106.54159189453128</span><span class="token punctuation">,</span> <span class="token number">29.56556010779314</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">106.54159189453128</span><span class="token punctuation">,</span> <span class="token number">29.725493070064537</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">106.21612192382815</span><span class="token punctuation">,</span> <span class="token number">29.71952998792036</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dem_clip <span class="token operator">=</span> dem<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span>

Export<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">toDrive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token literal-property property">image</span><span class="token operator">:</span>dem_clip<span class="token punctuation">,</span>
  <span class="token literal-property property">region</span><span class="token operator">:</span>roi
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

函数Export<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">tODrive</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span>region<span class="token punctuation">)</span> 向Google drive输入导出的图像

输出命令中建议指定的两个参数是image 和region，如果不指定region， <span class="token constant">GEE</span>会默认的将目前视野中的图像输出出去，造成输出数据的缺失。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="8、RGB组合"><a href="#8、RGB组合" class="headerlink" title="8、RGB组合"></a>8、RGB组合</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> lights03 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F152003'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'stable_lights'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'2003'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> lights13 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS/F182013'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'stable_lights'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'2013'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> changeImage <span class="token operator">=</span> lights13<span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span>lights03<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span>lights93<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'stable_lights'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'1993'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'change image'</span><span class="token punctuation">,</span> changeImage<span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>
changeImage<span class="token punctuation">,</span>
<span class="token punctuation">&#123;</span>
 <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">63</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token string">'Change composite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数的作用是自定义波段的名字
<span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span><span class="token punctuation">)</span>函数的作用是将函数前面的图像作为第一波段，后面的影像作为第二波段进行波段组合<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>







<h2 id="四、Landsat-Images"><a href="#四、Landsat-Images" class="headerlink" title="四、Landsat Images"></a>四、Landsat Images</h2><p>GEE 中内置了若干针对Landsat 卫星的命令，对这些命令的合理使用能增加分析效率。</p>
<h3 id="1、qualityMosaic-命令"><a href="#1、qualityMosaic-命令" class="headerlink" title="1、qualityMosaic 命令"></a>1、qualityMosaic 命令</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">107.193</span><span class="token punctuation">,</span> <span class="token number">29.1373</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B[2-5]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">add_NDVI</span> <span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> <span class="token constant">NDVI</span> <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//归一化差值运算（x-y）/(x+y)</span>
        <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">addBands</span><span class="token punctuation">(</span><span class="token constant">NDVI</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>；

<span class="token keyword">var</span> <span class="token constant">L8_NDVI</span> <span class="token operator">=</span> <span class="token constant">L8</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>add_NDVI<span class="token punctuation">)</span>；
<span class="token keyword">var</span> NDVI_Quality <span class="token operator">=</span> <span class="token constant">L8_NDVI</span><span class="token punctuation">.</span><span class="token function">qualityMosaic</span><span class="token punctuation">(</span><span class="token string">'nd'</span><span class="token punctuation">)</span>；


Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.618</span><span class="token punctuation">,</span> <span class="token number">29.6653</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>NDVI_Quality<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"bands"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B5"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token string-property property">"gamma"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'NDVI qualified'</span><span class="token punctuation">)</span>


该命令的功能是“选出最大值像素”。
本例的Image Collection 已经通过<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令给其中的每个图像都增加了<span class="token constant">NDVI</span><span class="token punctuation">(</span>波段名为nd<span class="token punctuation">)</span>数据，当利用qualityMosaic 命令并且选择nd波段为参数时，其结果就是将Image Collection 的<span class="token constant">NDVI</span> 最大的像素挑选出来并组合成
一副图像。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2、光谱分离命令"><a href="#2、光谱分离命令" class="headerlink" title="2、光谱分离命令"></a>2、光谱分离命令</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//加载“建设用地”，“水体”和“绿地”的Geometry</span>
<span class="token keyword">var</span> landsat5 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LT05/C01/T1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    China_provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    CQ_point <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">106.54876499135139</span><span class="token punctuation">,</span> <span class="token number">29.594019931841714</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bare <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">106.55483080849444</span><span class="token punctuation">,</span> <span class="token number">29.529437948319515</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">106.55139765445824</span><span class="token punctuation">,</span> <span class="token number">29.52555451875115</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">106.55654738551414</span><span class="token punctuation">,</span> <span class="token number">29.52346337953001</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">106.55843565976829</span><span class="token punctuation">,</span> <span class="token number">29.527496216222946</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> water <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">106.57311345239873</span><span class="token punctuation">,</span> <span class="token number">29.569534351977307</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">106.56727579226686</span><span class="token punctuation">,</span> <span class="token number">29.56833967471457</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">106.56933614290324</span><span class="token punctuation">,</span> <span class="token number">29.5656515992401</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token keyword">var</span> veg <span class="token operator">=</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">106.77944972250918</span><span class="token punctuation">,</span> <span class="token number">29.553706593461722</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">106.7749865267084</span><span class="token punctuation">,</span> <span class="token number">29.552511969146664</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">106.77773310873965</span><span class="token punctuation">,</span> <span class="token number">29.548330672830648</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//定义时间范围</span>
<span class="token keyword">var</span> ChongQing <span class="token operator">=</span> China_provinces<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>CQ_point<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> start_date <span class="token operator">=</span> <span class="token string">'2008-01-01'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end_date <span class="token operator">=</span> <span class="token string">'2008-12-31'</span><span class="token punctuation">;</span>

<span class="token comment">//合成无云图像</span>
<span class="token keyword">var</span> filtered <span class="token operator">=</span> landsat5<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>CQ_point<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span>start_date<span class="token punctuation">,</span> end_date<span class="token punctuation">)</span>
<span class="token keyword">var</span> composite <span class="token operator">=</span> ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span>Landsat<span class="token punctuation">.</span><span class="token function">simpleComposite</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">collection</span><span class="token operator">:</span> filtered<span class="token punctuation">,</span><span class="token literal-property property">asFloat</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//确定运算波段</span>
<span class="token keyword">var</span> unmixImage <span class="token operator">=</span> composite<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B1'</span><span class="token punctuation">,</span> <span class="token string">'B2'</span><span class="token punctuation">,</span> <span class="token string">'B3'</span><span class="token punctuation">,</span> <span class="token string">'B4'</span><span class="token punctuation">,</span> <span class="token string">'B5'</span><span class="token punctuation">,</span> <span class="token string">'B7'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取解缠的“解”</span>
<span class="token keyword">var</span> bareMean <span class="token operator">=</span> unmixImage<span class="token punctuation">.</span><span class="token function">reduceRegion</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bare<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> waterMean <span class="token operator">=</span> unmixImage<span class="token punctuation">.</span><span class="token function">reduceRegion</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> water<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> vegMean <span class="token operator">=</span> unmixImage<span class="token punctuation">.</span><span class="token function">reduceRegion</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> veg<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> endmembers <span class="token operator">=</span> ee<span class="token punctuation">.</span>Array<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>bareMean<span class="token punctuation">,</span> vegMean<span class="token punctuation">,</span> waterMean<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取解缠的“缠”</span>
<span class="token keyword">var</span> arrayImage <span class="token operator">=</span> unmixImage<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//进行解缠</span>
<span class="token keyword">var</span> unmixed <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span>endmembers<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">matrixSolve</span><span class="token punctuation">(</span>arrayImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> unmixedImage <span class="token operator">=</span> unmixed<span class="token punctuation">.</span><span class="token function">arrayProject</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arrayFlatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'bare'</span><span class="token punctuation">,</span> <span class="token string">'veg'</span><span class="token punctuation">,</span> <span class="token string">'water'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//把结果加载到底图上</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>CQ_point<span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>composite<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"B4"</span><span class="token punctuation">,</span><span class="token string">"B3"</span><span class="token punctuation">,</span><span class="token string">"B2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"Simple Composite"</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>unmixedImage<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Unmixed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



光谱分离可以看做一个解方程的过程。

	简单的来说，对于30m×30m 的像素来说，其占地面积为<span class="token number">1.34</span>亩，在这样大的面积上，如果有一半的水和一半的绿地，那么理论上它的光谱里应该有一半来自水，一半来自绿地。
对像素求取地物光谱的比例的过程就是光谱分离，其概念方程如下：
                       像素 × 比例 <span class="token operator">=</span> 终端像元
	其中，终端像元是已知的，像素在图像的不同位置有着不同的值，那么我们就可以求出
不同位置上不同地物的光谱比例

	本例中将地物分成了“建设用地”，“水体”和“绿地”三类，那么就可以求出不同位置这三种地物的光谱比例。
    
    配合显色设置，图上越红的地区建设用地的比例就越大，越蓝的地区水体的比例越大，越绿的地区绿地的比例越大。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="3、归一化差值运算"><a href="#3、归一化差值运算" class="headerlink" title="3、归一化差值运算"></a>3、归一化差值运算</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> l8 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> l8_one <span class="token operator">=</span> l8<span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.705</span><span class="token punctuation">,</span> <span class="token number">31.881</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2016-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token string">'CLOUD_COVER'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；
<span class="token keyword">var</span> <span class="token constant">NDVI_1</span> <span class="token operator">=</span> l8_one<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">NDVI_2</span> <span class="token operator">=</span> l8_one<span class="token punctuation">.</span><span class="token function">expression</span><span class="token punctuation">(</span><span class="token string">'(B4+B5)/(B4-B5)'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
    <span class="token string-property property">'B5'</span><span class="token operator">:</span> l8_one<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B5'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">'B4'</span><span class="token operator">:</span> l8_one<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'B4'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">NDVI_1</span><span class="token punctuation">,</span><span class="token constant">NDVI_2</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">NDVI_1</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string-property property">"min"</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token string-property property">"max"</span><span class="token operator">:</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token string-property property">"palette"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"0f0bff"</span><span class="token punctuation">,</span><span class="token string">"ff3305"</span><span class="token punctuation">,</span><span class="token string">"fbff1b"</span><span class="token punctuation">,</span><span class="token string">"0bff1e"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

通过将<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 与 <span class="token punctuation">.</span><span class="token function">expression</span><span class="token punctuation">(</span><span class="token string">'(B4+B5)/(B4-B5)'</span><span class="token punctuation">)</span><span class="token function">对比可以发现，归一化差值计算本质上是将两个参数进行固定数学运算的命令模板，即“</span><span class="token punctuation">(</span>前<span class="token operator">+</span>
后<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>前<span class="token operator">-</span>后<span class="token punctuation">)</span>”。因此可以合理运用这个命令，以计算<span class="token constant">NDVI</span> 或者<span class="token constant">NDWI</span> 等归一化参数，以提
高效率。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="4、云量指数计算"><a href="#4、云量指数计算" class="headerlink" title="4、云量指数计算"></a>4、云量指数计算</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> l8_TOA <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1_TOA"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.2608</span><span class="token punctuation">,</span> <span class="token number">29.5755</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Cloud_Rate <span class="token operator">=</span> ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span>Landsat<span class="token punctuation">.</span><span class="token function">simpleCloudScore</span><span class="token punctuation">(</span>l8_TOA<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Cloud_Rate<span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.14</span><span class="token punctuation">,</span> <span class="token number">30.3488</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Cloud_Rate<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">,</span><span class="token string">'B3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Cloud_Rate<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'cloud'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="5、去云合成"><a href="#5、去云合成" class="headerlink" title="5、去云合成"></a>5、去云合成</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">L8_RAW</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C01/T1"</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">106.1125</span><span class="token punctuation">,</span> <span class="token number">30.3772</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">'2018-01-01'</span><span class="token punctuation">,</span><span class="token string">'2018-12-31'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> L8_Siple_Composite <span class="token operator">=</span>
ee<span class="token punctuation">.</span>Algorithms<span class="token punctuation">.</span>Landsat<span class="token punctuation">.</span><span class="token function">simpleComposite</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">collection</span><span class="token operator">:</span><span class="token constant">L8_RAW</span><span class="token punctuation">,</span><span class="token literal-property property">asFloat</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">L8_RAW</span><span class="token punctuation">,</span>L8_Siple_Composite<span class="token punctuation">)</span><span class="token punctuation">;</span>

Map<span class="token punctuation">.</span><span class="token function">setCenter</span><span class="token punctuation">(</span><span class="token number">106.1125</span><span class="token punctuation">,</span> <span class="token number">30.3772</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>L8_Siple_Composite<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'B5'</span><span class="token punctuation">,</span><span class="token string">'B4'</span><span class="token punctuation">,</span><span class="token string">'B3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="五、精度质量评价"><a href="#五、精度质量评价" class="headerlink" title="五、精度质量评价"></a>五、精度质量评价</h2><h3 id="1、混淆矩阵Confusion-Matrix"><a href="#1、混淆矩阵Confusion-Matrix" class="headerlink" title="1、混淆矩阵Confusion Matrix"></a>1、混淆矩阵Confusion Matrix</h3><p>混淆矩阵常用于分类图像的分类质量验证，本节以下边的矩阵为例对混淆矩阵进行介绍。</p>
<table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>1817491</td>
<td>1038523</td>
<td>5543</td>
<td>240068</td>
<td>1240</td>
</tr>
<tr>
<td>1</td>
<td>1016690</td>
<td>2838574</td>
<td>745</td>
<td>137438</td>
<td>330</td>
</tr>
<tr>
<td>2</td>
<td>12611</td>
<td>2055</td>
<td>115033</td>
<td>142</td>
<td>84</td>
</tr>
<tr>
<td>3</td>
<td>150432</td>
<td>228089</td>
<td>24</td>
<td>94365</td>
<td>78</td>
</tr>
<tr>
<td>4</td>
<td>5104</td>
<td>2466</td>
<td>745</td>
<td>283</td>
<td>50583</td>
</tr>
</tbody></table>
<p>混淆矩阵的创建</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_Transform <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1817491</span><span class="token punctuation">,</span><span class="token number">1016690</span><span class="token punctuation">,</span><span class="token number">12611</span> <span class="token punctuation">,</span><span class="token number">150432</span><span class="token punctuation">,</span><span class="token number">5104</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">1038523</span><span class="token punctuation">,</span><span class="token number">2838574</span><span class="token punctuation">,</span><span class="token number">2055</span> <span class="token punctuation">,</span><span class="token number">228089</span><span class="token punctuation">,</span><span class="token number">2466</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">5543</span> <span class="token punctuation">,</span><span class="token number">745</span> <span class="token punctuation">,</span><span class="token number">115033</span><span class="token punctuation">,</span><span class="token number">24</span> <span class="token punctuation">,</span><span class="token number">745</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">240068</span> <span class="token punctuation">,</span><span class="token number">137438</span> <span class="token punctuation">,</span><span class="token number">142</span> <span class="token punctuation">,</span><span class="token number">94365</span> <span class="token punctuation">,</span><span class="token number">283</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">1240</span> <span class="token punctuation">,</span><span class="token number">330</span> <span class="token punctuation">,</span><span class="token number">84</span> <span class="token punctuation">,</span><span class="token number">78</span> <span class="token punctuation">,</span><span class="token number">50583</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Confusion_Matrix <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ConfusionMatrix</span><span class="token punctuation">(</span> Array_Transform <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span> Confusion_Matrix <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>混淆矩阵质量结果计算</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Array_Transform <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1817491</span><span class="token punctuation">,</span><span class="token number">1016690</span><span class="token punctuation">,</span><span class="token number">12611</span> <span class="token punctuation">,</span><span class="token number">150432</span><span class="token punctuation">,</span><span class="token number">5104</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">1038523</span><span class="token punctuation">,</span><span class="token number">2838574</span><span class="token punctuation">,</span><span class="token number">2055</span> <span class="token punctuation">,</span><span class="token number">228089</span><span class="token punctuation">,</span><span class="token number">2466</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">5543</span> <span class="token punctuation">,</span><span class="token number">745</span> <span class="token punctuation">,</span><span class="token number">115033</span><span class="token punctuation">,</span><span class="token number">24</span> <span class="token punctuation">,</span><span class="token number">745</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">240068</span> <span class="token punctuation">,</span><span class="token number">137438</span> <span class="token punctuation">,</span><span class="token number">142</span> <span class="token punctuation">,</span><span class="token number">94365</span> <span class="token punctuation">,</span><span class="token number">283</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
                                <span class="token punctuation">[</span><span class="token number">1240</span> <span class="token punctuation">,</span><span class="token number">330</span> <span class="token punctuation">,</span><span class="token number">84</span> <span class="token punctuation">,</span><span class="token number">78</span> <span class="token punctuation">,</span><span class="token number">50583</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Confusion_Matrix <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ConfusionMatrix</span><span class="token punctuation">(</span> Array_Transform <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Matrix_Kappa <span class="token operator">=</span> Confusion_Matrix<span class="token punctuation">.</span><span class="token function">kappa</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//卡帕系数</span>
<span class="token keyword">var</span> Matrix_Accuracy <span class="token operator">=</span> Confusion_Matrix<span class="token punctuation">.</span><span class="token function">accuracy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//精度</span>
<span class="token keyword">var</span> Matrix_ProducersAccuracy <span class="token operator">=</span> Confusion_Matrix<span class="token punctuation">.</span><span class="token function">producersAccuracy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//生产者精度</span>
<span class="token keyword">var</span> Matrix_ConsumersAccuracy <span class="token operator">=</span> Confusion_Matrix<span class="token punctuation">.</span><span class="token function">consumersAccuracy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Matrix_Order <span class="token operator">=</span> Confusion_Matrix<span class="token punctuation">.</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>Matrix_Kappa<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>Matrix_Accuracy <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>Matrix_ProducersAccuracy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>Matrix_ConsumersAccuracy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span>Matrix_Order<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="六、内置函数操作"><a href="#六、内置函数操作" class="headerlink" title="六、内置函数操作"></a>六、内置函数操作</h2><h3 id="1、Filter"><a href="#1、Filter" class="headerlink" title="1、Filter"></a>1、Filter</h3><p>​		筛选和连接本质上属于“属性操作”，在GEE 中筛选和连接以“筛选器”和“连接器”的方<br>式存在。通过本节的学习，我们可以掌握通过筛选获得目标数据，以及利用连接来结合多源<br>数据。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Name_CQ_Filter <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Chong_Qing'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token constant">CQ</span> <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Name_CQ_Filter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> CQ_Area <span class="token operator">=</span> <span class="token constant">CQ</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Smaller_Than_CQ_Filter <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span><span class="token string">'Shape_Area'</span><span class="token punctuation">,</span>CQ_Area<span class="token punctuation">)</span>

<span class="token keyword">var</span> Smaller_Than_CQ_Provinces <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Smaller_Than_CQ_Filter<span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Smaller_Than_CQ_Provinces<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>Smaller_Than_CQ_Provinces<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p>属性条件筛选</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> Start_Shan <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">stringStartsWith</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Shan'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> End_Nan <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">stringEndsWith</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Nan'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Congtain_Bei <span class="token operator">=</span> ee<span class="token punctuation">.</span>Filter<span class="token punctuation">.</span><span class="token function">stringContains</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'Bei'</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Provinces_Start_Shan <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Start_Shan<span class="token punctuation">)</span>

<span class="token keyword">var</span> Provinces_End_Nan <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>End_Nan<span class="token punctuation">)</span>

<span class="token keyword">var</span> Provinces_Congtain_Bei <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Congtain_Bei<span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>China_Provinces<span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Provinces_Start_Shan<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'00ffff'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Provinces_End_Nan<span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">'ff0000'</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>Provinces_Congtain_Bei<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h3 id="2、Reducer"><a href="#2、Reducer" class="headerlink" title="2、Reducer"></a>2、Reducer</h3><p>​		Reducer 的中文含义是“缩减器，减压器”。与筛选Filter 相比，Reducer 虽然也有“减少”的意思，但其更多的含义在于“通过分析后获得统计信息”上。比如有100 个苹果，Filter 处理后只剩下80 个，而Reducer 处理后得则可以到“平均重量”。</p>
<p>总之，Filter 着重于数量上的减少，而Reducer 强调数学抽象的汇总。</p>
<p>(可以理解为统计，reducer后面可加需要统计的操作)</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> China_Provinces <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Reducer_Count <span class="token operator">=</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Reducer_CountEvery <span class="token operator">=</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">countEvery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Reducer_First <span class="token operator">=</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Provinces_Number_1 <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceColumns</span><span class="token punctuation">(</span>Reducer_Count<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Provinces_Number_2 <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceColumns</span><span class="token punctuation">(</span>Reducer_CountEvery<span class="token punctuation">,</span><span class="token punctuation">[</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Provinces_First <span class="token operator">=</span> China_Provinces<span class="token punctuation">.</span><span class="token function">reduceColumns</span><span class="token punctuation">(</span>Reducer_First<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'NAME'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Reducer_Count'</span><span class="token punctuation">,</span>Provinces_Number_1<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Reducer_CountEvery'</span><span class="token punctuation">,</span>Provinces_Number_2<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'Reducer_First'</span><span class="token punctuation">,</span>Provinces_First<span class="token punctuation">)</span>


这里需要强调ee<span class="token punctuation">.</span><span class="token function">Reducer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>命令创建的是一个“名词”，其发挥作用只能在于其他“动词”
配合的前提下才能完成，本例中的动词是<span class="token punctuation">.</span><span class="token function">reducerColumns</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，可以理解为“列统计”。
此外要注意<span class="token punctuation">.</span>count 和 <span class="token punctuation">.</span>countEvery 的区别。<span class="token punctuation">.</span>count <span class="token function">是计算指定列的数据，如果数据缺失则不进行数量统计</span><span class="token punctuation">(</span>例如某数据不存在“<span class="token constant">NAME</span>”属性<span class="token punctuation">)</span>，而<span class="token punctuation">.</span>countEvery 则是统计所有数据。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p>线性拟合</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> Data_X <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Data_Y <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token keyword">var</span> Fig <span class="token operator">=</span> ui<span class="token punctuation">.</span>Chart<span class="token punctuation">.</span>array<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>Data_X<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>Data_Y<span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span>Fig<span class="token punctuation">)</span>

<span class="token keyword">var</span> Data_x <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">,</span><span class="token number">36</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">42</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">130</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Data_y <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Linear_Reducer <span class="token operator">=</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">linearFit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> Fited <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Data_x<span class="token punctuation">,</span>Data_y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>Linear_Reducer<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span>Fited<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="3、Kernel"><a href="#3、Kernel" class="headerlink" title="3、Kernel"></a>3、Kernel</h3><p>锐化卷积</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">CQ</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Chong_Qing'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">var</span> DEM_Roberts <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">roberts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//罗伯特梯度</span>
<span class="token keyword">var</span> DEM_Prewitt <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">prewitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//prewitt梯度</span>
<span class="token keyword">var</span> DEM_Sobel <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">sobel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//索伯尔梯度</span>
<span class="token keyword">var</span> DEM_Compass <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">compass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> DEM_Kirsch <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">kirsch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>

Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Roberts <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Roberts'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Prewitt <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">270</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">270</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Prewitt'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Sobel <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">370</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">370</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Sobel'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Compass <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">300</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Compass'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Kirsch <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1100</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">1100</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Kirsch'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<p>*钝化卷积</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">CQ</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">FeatureCollection</span><span class="token punctuation">(</span><span class="token string">"users/wangjinzhulala/China_Provinces"</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filterMetadata</span><span class="token punctuation">(</span><span class="token string">'NAME'</span><span class="token punctuation">,</span><span class="token string">'equals'</span><span class="token punctuation">,</span><span class="token string">'Chong_Qing'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> <span class="token constant">DEM</span> <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"USGS/SRTMGL1_003"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> DEM_Euclidean <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">euclidean</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'pixels'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> DEM_Gaussian <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">gaussian</span><span class="token punctuation">(</span> <span class="token number">10.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token string">'pixels'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> DEM_Manhattan <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">manhattan</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'pixels'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> DEM_Chebyshev <span class="token operator">=</span> <span class="token constant">DEM</span><span class="token punctuation">.</span><span class="token function">convolve</span><span class="token punctuation">(</span>ee<span class="token punctuation">.</span>Kernel<span class="token punctuation">.</span><span class="token function">chebyshev</span><span class="token punctuation">(</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'pixels'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span><span class="token constant">CQ</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span><span class="token constant">DEM</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">2000</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Euclidean <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">281</span> <span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">681</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Euclidean'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Gaussian <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">358</span> <span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">898</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Gaussian'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Manhattan <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">287</span> <span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">630</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Manhattan'</span><span class="token punctuation">)</span>
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>DEM_Chebyshev <span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">285</span> <span class="token punctuation">,</span><span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">630</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'DEM_Chebyshev'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="QA波段去云"><a href="#QA波段去云" class="headerlink" title="QA波段去云"></a>QA波段去云</h3><p>QA(data product <strong>quality assessment</strong>)是<strong>数据质量评估波段</strong>的简称，在不同的产品中有不同的名称。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> s2 <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"COPERNICUS/S2"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    point <span class="token operator">=</span> <span class="token comment">/* color: #98ff00 */</span>ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Point</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">116.20553071765003</span><span class="token punctuation">,</span> <span class="token number">39.404020061278715</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">/** 
* 
* remove cloud by QA bands 
* 
* */</span> 
<span class="token keyword">function</span> <span class="token function">rmCloudByQA</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token comment">//根据不同类型的影像选择质量波段</span>
  <span class="token keyword">var</span> qa <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'QA60'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> cloudBitMask <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> cirrusBitMask <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">11</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> mask <span class="token operator">=</span> qa<span class="token punctuation">.</span><span class="token function">bitwiseAnd</span><span class="token punctuation">(</span>cloudBitMask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> 
               <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>qa<span class="token punctuation">.</span><span class="token function">bitwiseAnd</span><span class="token punctuation">(</span>cirrusBitMask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 


<span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">var</span> startDate <span class="token operator">=</span> <span class="token string">"2019-4-4"</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> endDate <span class="token operator">=</span> <span class="token string">"2019-4-8"</span><span class="token punctuation">;</span> 
  Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> s2Imgs <span class="token operator">=</span> s2<span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span>startDate<span class="token punctuation">,</span> endDate<span class="token punctuation">)</span> 
                 <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>s2Imgs<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B4"</span><span class="token punctuation">,</span> <span class="token string">"B3"</span><span class="token punctuation">,</span> <span class="token string">"B2"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"raw"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  s2Imgs <span class="token operator">=</span> s2Imgs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>rmCloudByQA<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>s2Imgs<span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token literal-property property">bands</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">"B4"</span><span class="token punctuation">,</span> <span class="token string">"B3"</span><span class="token punctuation">,</span> <span class="token string">"B2"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"cloud"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 


<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

image<span class="token punctuation">.</span><span class="token function">mask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，会将影像的掩膜区域与非掩膜区域用<span class="token number">0</span>和<span class="token number">1</span>区分开来，其中<span class="token number">1</span>代表为掩膜，<span class="token number">0</span>代表未掩膜。影像的边框范围内，黑色代表已被掩膜的区域，白色代表未掩膜区域。
image<span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，updateMask会将影像上为<span class="token number">0</span>的区域掩膜掉，如果你希望某一景影像与另一景影像具有相同的掩膜，可以使用image2<span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span>image1<span class="token punctuation">.</span><span class="token function">mask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">not</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>。

updaeMask（）可以简单理解为保留括号内的区域，并且要注意是在现有图像掩码不为零的区域进行处理。

例如使用<span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span>：
首先，要不报错需要满足<span class="token constant">B</span>要么只有一个波段值，要么就和<span class="token constant">A</span>有相同的数量的波段。
然后平台会只对<span class="token constant">A</span>掩码不为<span class="token number">0</span>的区域处理，对于<span class="token constant">A</span>掩码为<span class="token number">0</span>而<span class="token constant">B</span>有效的区域不处理，即掩码仍为<span class="token number">0</span>，<span class="token number">0</span>代表无效，<span class="token number">1</span>代表有效，也就是取<span class="token constant">AB</span>交集。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>





<h3 id="影像直方图匹配"><a href="#影像直方图匹配" class="headerlink" title="影像直方图匹配"></a>影像直方图匹配</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//去云 </span>
<span class="token keyword">function</span> <span class="token function">rmCloud</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">var</span> qa <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'QA_PIXEL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> mask <span class="token operator">=</span> qa<span class="token punctuation">.</span><span class="token function">bitwiseAnd</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> 
        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>qa<span class="token punctuation">.</span><span class="token function">bitwiseAnd</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 


<span class="token comment">//缩放影像值 </span>
<span class="token keyword">function</span> <span class="token function">scaleImage</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">var</span> time_start <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"system:time_start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  image <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'SR_B4'</span><span class="token punctuation">,</span> <span class="token string">'SR_B3'</span><span class="token punctuation">,</span> <span class="token string">'SR_B2'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
               <span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">0.0000275</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> image<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">"system:time_start"</span><span class="token punctuation">,</span> time_start<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 


<span class="token comment">//研究区域 </span>
<span class="token keyword">var</span> roi <span class="token operator">=</span> ee<span class="token punctuation">.</span>Geometry<span class="token punctuation">.</span><span class="token function">Polygon</span><span class="token punctuation">(</span> 
        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">119.77658497404211</span><span class="token punctuation">,</span> <span class="token number">30.542135717928037</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
          <span class="token punctuation">[</span><span class="token number">119.77658497404211</span><span class="token punctuation">,</span> <span class="token number">29.991792284424644</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
          <span class="token punctuation">[</span><span class="token number">120.62253223966711</span><span class="token punctuation">,</span> <span class="token number">29.991792284424644</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
          <span class="token punctuation">[</span><span class="token number">120.62253223966711</span><span class="token punctuation">,</span> <span class="token number">30.542135717928037</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//高分辨率影像 </span>
<span class="token keyword">var</span> planetImage <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">Image</span><span class="token punctuation">(</span><span class="token string">"users/wangweihappy0/20200906_022218_1008_3B_AnalyticMS"</span><span class="token punctuation">)</span> 
                    <span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span> 
                    <span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"b3"</span><span class="token punctuation">,</span> <span class="token string">"b2"</span><span class="token punctuation">,</span> <span class="token string">"b1"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">//landsat8 C2数据，这里需要注意的是landsat8 C1的数据已经要被废弃，以后使用C2数据 </span>
<span class="token keyword">var</span> landsatImg <span class="token operator">=</span> ee<span class="token punctuation">.</span><span class="token function">ImageCollection</span><span class="token punctuation">(</span><span class="token string">"LANDSAT/LC08/C02/T1_L2"</span><span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">filterDate</span><span class="token punctuation">(</span><span class="token string">"2020-8-1"</span><span class="token punctuation">,</span> <span class="token string">"2020-11-1"</span><span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>rmCloud<span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>scaleImage<span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">median</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
                  <span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span> 
Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">"red"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"roi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>landsatImg<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"landsatImage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>planetImage<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">bands</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">min</span><span class="token operator">:</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token number">0.8</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">"planetImage"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">//展示直方图 </span>
<span class="token keyword">function</span> <span class="token function">showHistogram</span><span class="token punctuation">(</span><span class="token parameter">image<span class="token punctuation">,</span> roi<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">&#123;</span> 
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'波段直方图:'</span><span class="token operator">+</span>name<span class="token punctuation">,</span> 
    <span class="token literal-property property">hAxis</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'DN'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">vAxis</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'数量'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">series</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span> 
      <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"red"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
      <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"green"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
      <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"blue"</span><span class="token punctuation">&#125;</span> 
    <span class="token punctuation">&#125;</span> 
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
 
  <span class="token keyword">var</span> histogram <span class="token operator">=</span> ui<span class="token punctuation">.</span>Chart<span class="token punctuation">.</span>image<span class="token punctuation">.</span><span class="token function">histogram</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> 
    <span class="token literal-property property">image</span><span class="token operator">:</span> image<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"G"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">region</span><span class="token operator">:</span> roi<span class="token punctuation">,</span> 
    <span class="token literal-property property">maxBuckets</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">maxPixels</span><span class="token operator">:</span> <span class="token number">1e13</span> 
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSeriesNames</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"redBand"</span><span class="token punctuation">,</span> <span class="token string">"greenBand"</span><span class="token punctuation">,</span> <span class="token string">"blueBand"</span><span class="token punctuation">]</span><span class="token punctuation">)</span> 
  <span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token function">print</span><span class="token punctuation">(</span>histogram<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 
<span class="token comment">//展示两张影像直方图 </span>
<span class="token function">showHistogram</span><span class="token punctuation">(</span>landsatImg<span class="token punctuation">,</span> planetImage<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"原始"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token function">showHistogram</span><span class="token punctuation">(</span>planetImage<span class="token punctuation">,</span> planetImage<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"目标"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">//寻找原始影像数据列表和目标影像数据列表对应的值 </span>
<span class="token keyword">function</span> <span class="token function">lookup</span><span class="token punctuation">(</span><span class="token parameter">sourceHist<span class="token punctuation">,</span> targetHist</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token comment">//第一列数据是原始值，第二列是统计的累积数量 </span>
  <span class="token keyword">var</span> sourceValues <span class="token operator">=</span> sourceHist<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">project</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> sourceCounts <span class="token operator">=</span> sourceHist<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">project</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  sourceCounts <span class="token operator">=</span> sourceCounts<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>sourceCounts<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
  <span class="token keyword">var</span> targetValues <span class="token operator">=</span> targetHist<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">project</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> targetCounts <span class="token operator">=</span> targetHist<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">project</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  targetCounts <span class="token operator">=</span> targetCounts<span class="token punctuation">.</span><span class="token function">divide</span><span class="token punctuation">(</span>targetCounts<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
  <span class="token comment">//遍历原始数据值，查找大于这个值的最大索引，然后返回对应的数据 </span>
  <span class="token keyword">var</span> yValues <span class="token operator">=</span> sourceCounts<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
    <span class="token keyword">var</span> index <span class="token operator">=</span> targetCounts<span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">argmax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">return</span> targetValues<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">x</span><span class="token operator">:</span> sourceValues<span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> yValues<span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 


<span class="token comment">//直方图匹配 </span>
<span class="token keyword">function</span> <span class="token function">histogramMatching</span><span class="token punctuation">(</span><span class="token parameter">sourceImg<span class="token punctuation">,</span> targetImg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
  <span class="token keyword">var</span> geom <span class="token operator">=</span> sourceImg<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">&#123;</span> 
    <span class="token literal-property property">reducer</span><span class="token operator">:</span> ee<span class="token punctuation">.</span>Reducer<span class="token punctuation">.</span><span class="token function">autoHistogram</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token literal-property property">maxBuckets</span><span class="token operator">:</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token literal-property property">cumulative</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">geometry</span><span class="token operator">:</span> geom<span class="token punctuation">,</span> 
    <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">maxPixels</span><span class="token operator">:</span> <span class="token number">1e13</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">tileScale</span><span class="token operator">:</span> <span class="token number">16</span> 
  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> source <span class="token operator">=</span> sourceImg<span class="token punctuation">.</span><span class="token function">reduceRegion</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> target <span class="token operator">=</span> targetImg<span class="token punctuation">.</span><span class="token function">updateMask</span><span class="token punctuation">(</span>sourceImg<span class="token punctuation">.</span><span class="token function">mask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
                        <span class="token punctuation">.</span><span class="token function">reduceRegion</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token comment">//使用插值生成对应的数据 </span>
  <span class="token keyword">var</span> red <span class="token operator">=</span> sourceImg<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token function">lookup</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'R'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'R'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> green <span class="token operator">=</span> sourceImg<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'G'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token function">lookup</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'G'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token keyword">var</span> blue <span class="token operator">=</span> sourceImg<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token function">lookup</span><span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token comment">//生成RGB图像 </span>
  <span class="token keyword">return</span> ee<span class="token punctuation">.</span>Image<span class="token punctuation">.</span><span class="token function">cat</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span>green<span class="token punctuation">,</span> blue<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span> 
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">histogramMatching</span><span class="token punctuation">(</span>planetImage<span class="token punctuation">,</span> landsatImg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token literal-property property">bands</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'R'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>









<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>​		很多情况下，程序在执行过程中会反复完成相同或类似的任务，为了避免多次重复编写相同的代码段，JavaScript把部分代码包装在能够重复使用的模块，称为函数。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sayhello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello!!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//我们还可以通过象函数传递数据来大大地扩展函数的功能，其实现方法是在调用函数时给他传递一个或多个“参数”，函数内部声明的变量只在函数内部有效</span>
<span class="token keyword">function</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token operator">*</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//函数还可以设置返回值用于输出结果</span>
<span class="token keyword">function</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">var</span> c<span class="token operator">=</span>a<span class="token operator">+</span>b<span class="token punctuation">;</span>
	<span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">//函数声明后，可以通过如下方式进行调用</span>
<span class="token function">sayhello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sum<span class="token operator">=</span><span class="token function">time</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="七、简单应用"><a href="#七、简单应用" class="headerlink" title="七、简单应用"></a>七、简单应用</h2><h3 id="构建函数库："><a href="#构建函数库：" class="headerlink" title="构建函数库："></a>构建函数库：</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">//例如构建计算ndvi和ndwi指数的函数库</span>
<span class="token keyword">var</span> indexes <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

indexes<span class="token punctuation">.</span><span class="token function-variable function">cal_ndvi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> ndvi <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"B8"</span><span class="token punctuation">,</span><span class="token string">"B4"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'NDVI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> date <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'system:time_start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              
  <span class="token keyword">return</span> ndvi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'system:time_start'</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>


indexes<span class="token punctuation">.</span><span class="token function-variable function">cal_ndwi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">image</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">var</span> ndwi <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">normalizedDifference</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'B3'</span><span class="token punctuation">,</span><span class="token string">'B8'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'NDWI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> date <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'system:time_start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ndwi<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'system:time_start'</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>


exports <span class="token operator">=</span> indexes<span class="token punctuation">;</span>


<span class="token comment">//调用时只需在另一脚本下require目标函数库的路径即可</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<p><strong>ee.join.saveAll（matchesKey，ordering，ascending，measureKey，outer）</strong></p>
<p>​		作用：返回一个连接，该连接可以将第一个集合当中的每个元素与第二个集合当中的一组元素进行匹配。匹配列表作为附加属性会被添加到每个结果中。如果指定了measure Key参数，那么每一组匹配项都附加一个连接度量值。当withinDistance或maxDifference筛选器被用作连接条件时，会生成连接度量值。</p>
<p>返回值：连接（Join）</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>matchesKey</td>
<td>String</td>
<td>用于保存匹配列表的属性名称。</td>
</tr>
<tr>
<td>ordering</td>
<td>String, default: null</td>
<td>对匹配列表进行排序的属性。</td>
</tr>
<tr>
<td>ascending</td>
<td>Boolean, default: true</td>
<td>排序（ordering）是否为升序。</td>
</tr>
<tr>
<td>measureKey</td>
<td>String, default: null</td>
<td>一个可选的属性名称，用于保存每个匹配项的连接条件的度量。</td>
</tr>
<tr>
<td>outer</td>
<td>Boolean, default: false</td>
<td>如果为真，则结果将包含没有匹配的主行。</td>
</tr>
</tbody></table>
<h3 id="GEE中内存溢出问题"><a href="#GEE中内存溢出问题" class="headerlink" title="GEE中内存溢出问题"></a>GEE中内存溢出问题</h3><p>​		在 Google Earth Engine（GEE）平台上处理大型数据集时，加载整个数据集可能导致内存不足的问题。分块处理可以将数据划分为小块，逐块处理，从而有效降低内存压力。这对于处理大规模数据集、避免系统崩溃和提高算法性能至关重要。通过分块处理，优化 GEE 中对大规模数据集的操作，以提高效率、降低资源消耗。</p>
<img src="https://img-blog.csdnimg.cn/direct/16868f3c1d5448c7a490f5e88432e674.png" alt="img" style="zoom:30%;" />

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Map<span class="token punctuation">.</span><span class="token function">centerObject</span><span class="token punctuation">(</span>table<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 记录程序开始时间</span>
<span class="token keyword">var</span> startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'程序开始时间'</span><span class="token punctuation">,</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> eevp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'users/949384116/lib:Tools/VectorProcessor'</span><span class="token punctuation">)</span><span class="token comment">//API函数库</span>

<span class="token keyword">var</span> featureCollection <span class="token operator">=</span> eevp<span class="token punctuation">.</span><span class="token function">vecSplitByRowCol</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filterBounds</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

featureCollection<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nSize</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// print('Feature Collection Size: ', nSize)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nSize<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> smallVec <span class="token operator">=</span> eevp<span class="token punctuation">.</span><span class="token function">getSmallVec</span><span class="token punctuation">(</span>featureCollection<span class="token punctuation">,</span> i<span class="token punctuation">,</span> table<span class="token punctuation">.</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>smallVec<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token string">'Vec '</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 这里可以使用分块后的矢量数据去处理自定义代码</span>

    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 记录结束时间</span>
<span class="token keyword">var</span> endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'程序结束时间'</span><span class="token punctuation">,</span> endTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 计算执行时间（以毫秒为单位）</span>
<span class="token keyword">var</span> executionTimeMS <span class="token operator">=</span> endTime <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
<span class="token keyword">var</span> executionTimeStringMS <span class="token operator">=</span> executionTimeMS<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' 毫秒'</span><span class="token punctuation">;</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'程序执行时间: '</span> <span class="token operator">+</span> executionTimeStringMS<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


</article><div class="post-copyright"><div class="post-copyright__author_group"><a class="post-copyright__author_img" href="/about/"><img class="post-copyright__author_img_front" src="https://img.picgo.net/2024/08/08/_20240808122233aa8149b8e4c66964.jpg"></a><div class="post-copyright__author_name">随风</div><div class="post-copyright__author_desc"></div></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div id="quit-box" onclick="RemoveRewardMask()"></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本文是原创文章，采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>协议，完整转载请注明来自<a href="/">随风</a></span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/GEE/"><span class="tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>GEE<span class="tagsPageCount">1</span></span></a><a class="post-meta__tags" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>算法<span class="tagsPageCount">1</span></span></a><a class="post-meta__tags" href="/tags/%E9%81%A5%E6%84%9F/"><span class="tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>遥感<span class="tagsPageCount">1</span></span></a><a class="post-meta__tags" href="/tags/%E4%BA%91%E8%AE%A1%E7%AE%97/"><span class="tags-punctuation"><i class="solitude fa-solid fa-hashtag"></i>云计算<span class="tagsPageCount">1</span></span></a></div></div></div><nav class="needEndHide pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/08/08/hello-world/"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">测试</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-bg-top"><div class="is-center"><div class="author-info__top-group"><div class="author-info__sayhi" id="author-info__sayhi" onclick="sco.changeSayHelloText()">sayhello.morning</div></div></div></div><a class="card-info-avatar" href="/about/" title="头像"><div class="avatar-img"><img src="https://img.picgo.net/2024/08/08/_20240808122233aa8149b8e4c66964.jpg" alt="头像"></div></a><div class="card-info__desc_group"><div class="author-info__name">随风</div><div class="author-info__desc"></div><div class="card-info__data is-center"><a href="/archives/" title="累计文章数:2"><div class="length-num">2</div><div class="headline">文章</div></a><a href="/tags/" title="标签总数:5"><div class="length-num">5</div><div class="headline">标签</div></a><a href="/categories/" title="分类总数:2"><div class="length-num">2</div><div class="headline">分类</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" target="_blank" rel="noopener" href="https://github.com/zhenc-cz" title="Github"><i class="solitude  fab fa-github"></i></a><a class="social-icon" target="_blank" rel="noopener" href="https://space.bilibili.com/" title="Bilibili"><i class="solitude  fab fa-bilibili"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="solitude fa-solid fa-bars"></i><span>文章目录</span></div><div class="toc-content" id="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80"><span class="toc-text">引言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-text">一、基础数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%AD%97%E7%AC%A6String"><span class="toc-text">1、字符String</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%95%B0%E5%AD%97Number"><span class="toc-text">2、数字Number</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%AD%97%E5%85%B8Dictionary"><span class="toc-text">3、字典Dictionary</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%88%97%E8%A1%A8List"><span class="toc-text">4、列表List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E7%9F%A9%E9%98%B5Array"><span class="toc-text">5、矩阵Array</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81GEE%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">二、GEE数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Geometry"><span class="toc-text">1、Geometry</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Feature"><span class="toc-text">2、Feature</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81FeatureCollection"><span class="toc-text">3、FeatureCollection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Image"><span class="toc-text">3、Image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81ImageCollection"><span class="toc-text">4、ImageCollection</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-text">三、案例分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81NDWI%E8%AE%A1%E7%AE%97%E2%80%94-%E4%BB%A5Landsat8%E4%B8%BA%E4%BE%8B"><span class="toc-text">1、NDWI计算—-以Landsat8为例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E6%A0%85%E6%A0%BC%E7%9A%84%E5%B1%B1%E4%BD%93%E9%98%B4%E5%BD%B1%E6%93%8D%E4%BD%9C-Map%E7%BB%84%E4%BB%B6"><span class="toc-text">2、栅格的山体阴影操作&#x2F; Map组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%A0%85%E6%A0%BC%E5%A1%AB%E6%B4%BC%E6%93%8D%E4%BD%9C"><span class="toc-text">3、栅格填洼操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E6%A0%85%E6%A0%BC%E7%9A%84%E5%8D%B7%E7%A7%AF%E6%93%8D%E4%BD%9C"><span class="toc-text">4、栅格的卷积操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%A0%85%E6%A0%BC%E7%9A%84%E9%82%BB%E5%9F%9F%E7%BC%A9%E5%87%8F%E6%93%8D%E4%BD%9C"><span class="toc-text">5、栅格的邻域缩减操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E6%A0%85%E6%A0%BC%E8%BD%AC%E7%9F%A2%E9%87%8F"><span class="toc-text">6、栅格转矢量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7%E3%80%81%E6%A0%85%E6%A0%BC%E8%BE%93%E5%87%BA%E6%93%8D%E4%BD%9C"><span class="toc-text">7、栅格输出操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81RGB%E7%BB%84%E5%90%88"><span class="toc-text">8、RGB组合</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81Landsat-Images"><span class="toc-text">四、Landsat Images</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81qualityMosaic-%E5%91%BD%E4%BB%A4"><span class="toc-text">1、qualityMosaic 命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E5%85%89%E8%B0%B1%E5%88%86%E7%A6%BB%E5%91%BD%E4%BB%A4"><span class="toc-text">2、光谱分离命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%BD%92%E4%B8%80%E5%8C%96%E5%B7%AE%E5%80%BC%E8%BF%90%E7%AE%97"><span class="toc-text">3、归一化差值运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E4%BA%91%E9%87%8F%E6%8C%87%E6%95%B0%E8%AE%A1%E7%AE%97"><span class="toc-text">4、云量指数计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E5%8E%BB%E4%BA%91%E5%90%88%E6%88%90"><span class="toc-text">5、去云合成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%B2%BE%E5%BA%A6%E8%B4%A8%E9%87%8F%E8%AF%84%E4%BB%B7"><span class="toc-text">五、精度质量评价</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E6%B7%B7%E6%B7%86%E7%9F%A9%E9%98%B5Confusion-Matrix"><span class="toc-text">1、混淆矩阵Confusion Matrix</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E6%93%8D%E4%BD%9C"><span class="toc-text">六、内置函数操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81Filter"><span class="toc-text">1、Filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Reducer"><span class="toc-text">2、Reducer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81Kernel"><span class="toc-text">3、Kernel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QA%E6%B3%A2%E6%AE%B5%E5%8E%BB%E4%BA%91"><span class="toc-text">QA波段去云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%B1%E5%83%8F%E7%9B%B4%E6%96%B9%E5%9B%BE%E5%8C%B9%E9%85%8D"><span class="toc-text">影像直方图匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-text">函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8"><span class="toc-text">七、简单应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E5%87%BD%E6%95%B0%E5%BA%93%EF%BC%9A"><span class="toc-text">构建函数库：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GEE%E4%B8%AD%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E9%97%AE%E9%A2%98"><span class="toc-text">GEE中内存溢出问题</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="solitude fa-solid fa-map"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/08/08/GEE%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%BA%94%E7%94%A8/" title="GEE基础语法与应用"><img alt="GEE基础语法与应用" src="/img/default.avif"></a><div class="content"><span class="title" href="/2024/08/08/GEE%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%BA%94%E7%94%A8/" title="GEE基础语法与应用">GEE基础语法与应用</span><span class="article-recent_post_categories" href="/2024/08/08/GEE%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%BA%94%E7%94%A8/">遥感</span></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/08/08/hello-world/" title="测试"><img alt="测试" src="/img/default.avif"></a><div class="content"><span class="title" href="/2024/08/08/hello-world/" title="测试">测试</span><span class="article-recent_post_categories" href="/2024/08/08/hello-world/">Solitude</span></div></div></div></div></div></div></main><footer id="footer"><div id="st-footer-bar"><div class="footer-logo"><span>Solitude</span></div><div class="footer-bar-description">Articles from 随风.</div><a class="footer-bar-link" href="/about/">Learn more</a></div><div id="footer_deal"><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/zhenc-cz" title="Github"><i class="solitude  fab fa-github"></i></a><a class="deal_link" href="/zhenc926@163.com" title="Mail"><i class="solitude  fab fa-envelope"></i></a></div><div id="st-footer"><div class="footer-group"><h3 class="footer-title">Navgation</h3><div class="footer-links"><a class="footer-item" href="/archives/" title="Archives">Archives</a><a class="footer-item" href="/categories/" title="Categories">Categories</a><a class="footer-item" href="/tags/" title="Tags">Tags</a></div></div><div class="footer-group"><h3 class="footer-title">Server</h3><div class="footer-links"><a class="footer-item" target="_blank" rel="noopener" href="https://aliyun.com/" title="Aliyun">Aliyun</a><a class="footer-item" target="_blank" rel="noopener" href="https://v6.51.la/" title="51la">51la</a></div></div><div class="footer-group"><h3 class="footer-title">Arrangement</h3><div class="footer-links"><a class="footer-item" href="/cookies/" title="Cookies">Cookies</a><a class="footer-item" href="/privacy/" title="Privacy">Privacy</a><a class="footer-item" href="/copyright/" title="Copyright">Copyright</a></div></div></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div class="copyright">© 2024 By&nbsp;<a class="footer-bar-link" href="/">随风</a></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/everfu/hexo-theme-solitude" alt="Theme">Theme</a><a class="footer-bar-link cc" href="/%5Bobject%20Object%5D,%5Bobject%20Object%5D" aria-label="copyright"><i class="solitude fa-solid fa-copyright"></i><i class="solitude fa-brands fa-creative-commons-by"></i><i class="solitude fa-brands fa-creative-commons-nc"></i><i class="solitude fa-brands fa-creative-commons-nd"></i></a></div></div></div></footer></div><!-- right_menu--><!-- inject body--><div><script src="/js/utils.js?v=2.0.7"></script><script src="/js/main.js?v=2.0.7"></script><script src="/js/third_party/waterfall.min.js?v=2.0.7"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script src="/js/third_party/universe.min.js?v=2.0.7"></script><script>dark()
</script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script><div class="js-pjax"></div></div><!-- pjax--><script>const pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: ['title','#body-wrap','#site-config','meta[name="description"]','.js-pjax','meta[property^="og:"]','#config-diff'],
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
})

document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
})

document.addEventListener('pjax:complete', () => {
    window.refreshFn()

    document.querySelectorAll('script[data-pjax]').forEach(item => {
        const newScript = document.createElement('script')
        const content = item.text || item.textContent || item.innerHTML || ""
        Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
        newScript.appendChild(document.createTextNode(content))
        item.parentNode.replaceChild(newScript, item)
    })

    GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

})

document.addEventListener('pjax:error', (e) => {
    if (e.request.status === 404) {
        pjax.loadUrl('/404.html')
    }
})</script><!-- theme--><script>initTheme = () => {
    let isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const cachedMode = utils.saveToLocal.get('theme');
    if (cachedMode === undefined) {
        const nowMode =
            isDarkMode ? 'dark' : 'light'
        document.documentElement.setAttribute('data-theme', nowMode);
    } else {
        document.documentElement.setAttribute('data-theme', cachedMode);
    }
    typeof rm === 'object' && rm.mode(cachedMode === 'dark' && isDarkMode)
}
initTheme()</script><!-- google adsense--><!-- search--><!-- Tianli-Talk--><!-- music--></body></html><script>const posts=["2024/08/08/GEE基础语法与应用/","2024/08/08/hello-world/"];function toRandomPost(){ pjax.loadUrl(GLOBAL_CONFIG.root+posts[Math.floor(Math.random()*posts.length)]); }</script>